{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///external commonjs \"tslib\"","webpack:///../shared/src/index.ts","webpack:///../shared/src/lib/memory-lock.ts","webpack:///external commonjs \"async-mutex\"","webpack:///../shared/src/lib/hash.ts","webpack:///external node-commonjs \"crypto\"","webpack:///../shared/src/lib/network-utils.ts","webpack:///external node-commonjs \"node:dns/promises\"","webpack:///../shared/src/lib/system/system.ts","webpack:///../../shared/src/index.ts","webpack:///../../shared/src/lib/common/index.ts","webpack:///../../shared/src/lib/common/utils/index.ts","webpack:///../../shared/src/lib/common/utils/object-utils.ts","webpack:///../../shared/src/lib/common/utils/utils.ts","webpack:///external commonjs \"deepmerge\"","webpack:///../../shared/src/lib/common/utils/assertions.ts","webpack:///../../shared/src/lib/common/base-model.ts","webpack:///external commonjs \"@sinclair/typebox\"","webpack:///../../shared/src/lib/common/locale.ts","webpack:///../../shared/src/lib/common/security/index.ts","webpack:///../../shared/src/lib/common/security/permission.ts","webpack:///../../shared/src/lib/common/multipart-file.ts","webpack:///../../shared/src/lib/common/pickup-error.ts","webpack:///../../shared/src/lib/flag/flag.ts","webpack:///../../shared/src/lib/authentication/dto/authentication-response.ts","webpack:///../../shared/src/lib/authentication/dto/sign-up-request.ts","webpack:///../../shared/src/lib/user/user.ts","webpack:///../../shared/src/lib/common/id-generator.ts","webpack:///external commonjs \"nanoid\"","webpack:///../../shared/src/lib/classroom/classroom-member.ts","webpack:///../../shared/src/lib/authentication/dto/sign-in-request.ts","webpack:///../../shared/src/lib/authentication/model/principal-type.ts","webpack:///../../shared/src/lib/authentication/model/principal.ts","webpack:///../../shared/src/lib/common/seek-page.ts","webpack:///../../shared/src/lib/classroom/index.ts","webpack:///../../shared/src/lib/classroom/classroom.ts","webpack:///../../shared/src/lib/classroom/classroom-member.request.ts","webpack:///../../shared/src/lib/platform/index.ts","webpack:///../../shared/src/lib/platform/platform.model.ts","webpack:///../../shared/src/lib/invitations/index.ts","webpack:///../../shared/src/lib/invitations/invitation.ts","webpack:///../../shared/src/lib/classroom-role/classroom-role.ts","webpack:///../../shared/src/lib/platform/platform.request.ts","webpack:///../../shared/src/lib/platform/platform-classroom.request.ts","webpack:///../../shared/src/lib/authentication/index.ts","webpack:///../../shared/src/lib/authentication/requests.ts","webpack:///../../shared/src/lib/otp/index.ts","webpack:///../../shared/src/lib/otp/otp-model.ts","webpack:///../../shared/src/lib/otp/otp-type.ts","webpack:///../../shared/src/lib/otp/otp-requests.ts","webpack:///../../shared/src/lib/user/index.ts","webpack:///../../shared/src/lib/user/user-dto.ts","webpack:///../../shared/src/lib/roles/index.ts","webpack:///../../shared/src/lib/roles/permissions.ts","webpack:///../../shared/src/lib/classroom-member/index.ts","webpack:///../../shared/src/lib/classroom-member/classroom-member.ts","webpack:///../../shared/src/lib/classroom-role/index.ts","webpack:///../../shared/src/lib/classroom-role/classroom-role.request.ts","webpack:///../../shared/src/lib/audit-events/index.ts","webpack:///../../shared/src/lib/audit-events/audit-event.ts","webpack:///external commonjs \"@sinclair/typebox/system\"","webpack:///../shared/src/lib/system/system-prop.ts","webpack:///../shared/src/lib/exception-handler.ts","webpack:///external commonjs \"@sentry/node\"","webpack:///../shared/src/lib/crypto.ts","webpack:///external node-commonjs \"node:crypto\"","webpack:///external node-commonjs \"node:util\"","webpack:///../shared/src/lib/semaphore.ts","webpack:///../shared/src/lib/promise-handler.ts","webpack:///../shared/src/lib/logger.ts","webpack:///external commonjs \"pino\"","webpack:///external commonjs \"pino-loki\"","webpack:///../shared/src/lib/exec.ts","webpack:///external node-commonjs \"node:child_process\"","webpack:///./src/app/app.ts","webpack:///external commonjs \"@fastify/swagger\"","webpack:///external commonjs \"fastify-socket.io\"","webpack:///./src/app/authentication/lib/access-token-manager.ts","webpack:///external commonjs \"dayjs\"","webpack:///./src/app/helper/jwt-utils.ts","webpack:///external commonjs \"jsonwebtoken\"","webpack:///./src/app/core/security/security-handler-chain.ts","webpack:///./src/app/core/security/authn/access-token-authn-handler.ts","webpack:///./src/app/core/security/security-handler.ts","webpack:///./src/app/core/security/authn/anonymous-authn-handler.ts","webpack:///./src/app/core/security/authz/principal-type-authz-handler.ts","webpack:///./src/app/core/security/authz/project-authz-handler.ts","webpack:///./src/app/core/request/request-utils.ts","webpack:///./src/app/websockets/websockets.service.ts","webpack:///./src/app/helper/openapi/openapi.module.ts","webpack:///./src/app/helper/openapi/openapi.controller.ts","webpack:///./src/app/helper/system-validator.ts","webpack:///./src/app/database/database-connection.ts","webpack:///external commonjs \"typeorm\"","webpack:///./src/app/otp/otp-entity.ts","webpack:///./src/app/database/database-common.ts","webpack:///./src/app/database/postgres-connection.ts","webpack:///./src/app/database/seeds/dev-seeds.ts","webpack:///./src/app/server.ts","webpack:///external commonjs \"@fastify/cors\"","webpack:///external commonjs \"@fastify/formbody\"","webpack:///external commonjs \"@fastify/multipart\"","webpack:///external commonjs \"fastify\"","webpack:///external commonjs \"fastify-favicon\"","webpack:///external commonjs \"fastify-raw-body\"","webpack:///external commonjs \"qs\"","webpack:///./src/app/helper/error-handler.ts","webpack:///external commonjs \"http-status-codes\"","webpack:///webpack/bootstrap","webpack:///./src/main.ts"],"sourcesContent":["module.exports = require(\"tslib\");","export * from './lib/memory-lock'\nexport * from './lib/hash'\nexport * from './lib/network-utils'\nexport * from './lib/exception-handler'\nexport * from './lib/crypto'\nexport * from './lib/semaphore'\nexport * from './lib/system/system'\nexport * from './lib/system/system-prop'\nexport * from './lib/promise-handler'\nexport * from './lib/logger'\nexport * from './lib/exec'","import { E_TIMEOUT, Mutex, MutexInterface, withTimeout } from 'async-mutex'\n\nconst memoryLocks = new Map<string, MutexLockWrapper>()\nclass MutexLockWrapper {\n    private lock: MutexInterface\n\n    constructor(timeout?: number) {\n        if (timeout) {\n            this.lock = withTimeout(new Mutex(), timeout)\n        }\n        else {\n            this.lock = new Mutex()\n        }\n    }\n\n    async acquire(): Promise<void> {\n        await this.lock.acquire()\n    }\n\n    async release(): Promise<void> {\n        this.lock.release()\n    }\n}\n\n\n\nexport const memoryLock = {\n    acquire: async (key: string, timeout?: number): Promise<ApLock> => {\n        let lock = memoryLocks.get(key)\n        if (!lock) {\n            lock = new MutexLockWrapper(timeout)\n            memoryLocks.set(key, lock)\n        }\n        await lock.acquire()\n        return lock\n    },\n    isTimeoutError: (e: unknown): boolean => {\n        return e === E_TIMEOUT\n    },\n}\n\nexport type ApLock = {\n    release(): Promise<unknown>\n}\n","module.exports = require(\"async-mutex\");","import * as crypto from 'crypto'\n\nfunction hashObject(object: Record<string, unknown>) {\n    const algorithm = 'sha256'\n    const hash = crypto.createHash(algorithm)\n    hash.update(JSON.stringify(object))\n    return hash.digest('hex')\n}\n\nexport const hashUtils = {\n    hashObject,\n}","module.exports = require(\"crypto\");","import dns from 'node:dns/promises'\nimport { system } from './system/system'\nimport { SharedSystemProp } from './system/system-prop'\nimport { PuEnvironment } from '@pickup/shared'\n\nconst GOOGLE_DNS = '216.239.32.10'\nconst PUBLIC_IP_ADDRESS_QUERY = 'o-o.myaddr.l.google.com'\n\ntype IpMetadata = {\n    ip: string\n}\n\nlet ipMetadata: IpMetadata | undefined\n\nconst getPublicIp = async (): Promise<IpMetadata> => {\n    if (ipMetadata !== undefined) {\n        return ipMetadata\n    }\n\n    dns.setServers([GOOGLE_DNS])\n\n    const ipList = await dns.resolve(PUBLIC_IP_ADDRESS_QUERY, 'TXT')\n\n    ipMetadata = {\n        ip: ipList[0][0],\n    }\n\n    return ipMetadata\n}\n\nconst appendSlashAndApi = (url: string): string => {\n    const slash = url.endsWith('/') ? '' : '/'\n    return `${url}${slash}api/`\n}\n\nconst getInternalApiUrl = (): string => {\n    if (system.isApp()) {\n        return 'http://127.0.0.1:3000/'\n    }\n    const url = system.getOrThrow(SharedSystemProp.FRONTEND_URL)\n    return appendSlashAndApi(url)\n}\n\nconst getPublicUrl = async (): Promise<string> => {\n    const environment = system.getOrThrow<PuEnvironment>(SharedSystemProp.ENVIRONMENT)\n    let url = system.getOrThrow(SharedSystemProp.FRONTEND_URL)\n    \n    if (extractHostname(url) === 'localhost' && environment === PuEnvironment.PRODUCTION) {\n        url = `http://${(await getPublicIp()).ip}`\n    }\n\n    return appendSlashAndApi(url)\n}\n\n\n\nfunction extractHostname(url: string): string | null {\n    try {\n        const hostname = new URL(url).hostname\n        return hostname\n    }\n    catch (e) {\n        return null\n    }\n}\n\nexport const networkUtls = {\n    getPublicUrl,\n    getInternalApiUrl,\n    getPublicIp,\n}","module.exports = require(\"node:dns/promises\");","import {\n    ErrorCode,\n    isNil,\n    PickUpError,\n    PuEdition,\n} from '@pickup/shared'\nimport { AppSystemProp, SharedSystemProp, SystemProp } from './system-prop'\n\nexport enum RedisType {\n    SENTINEL = 'SENTINEL',\n    DEFAULT = 'DEFAULT',\n}\n\nexport enum ContainerType {\n    APP = 'APP',\n}\n\nexport enum DatabaseType {\n    POSTGRES = 'POSTGRES',\n    SQLITE3 = 'SQLITE3',\n}\n\nconst systemPropDefaultValues: Partial<Record<SystemProp, string>> = {\n    [AppSystemProp.API_RATE_LIMIT_AUTHN_ENABLED]: 'true',\n    [AppSystemProp.API_RATE_LIMIT_AUTHN_MAX]: '50',\n    [AppSystemProp.API_RATE_LIMIT_AUTHN_WINDOW]: '1 minute',\n    [AppSystemProp.DB_TYPE]: DatabaseType.POSTGRES,\n    [AppSystemProp.EDITION]: PuEdition.COMMUNITY,\n    [AppSystemProp.SHOW_PLATFORM_DEMO]: 'false',\n    [AppSystemProp.MAX_FILE_SIZE_MB]: '4',\n    [SharedSystemProp.ENVIRONMENT]: 'prod',\n    [SharedSystemProp.LOG_LEVEL]: 'info',\n    [SharedSystemProp.LOG_PRETTY]: 'false',\n    [SharedSystemProp.CONTAINER_TYPE]: ContainerType.APP,\n}\n\nexport const system = {\n    get<T extends string>(prop: SystemProp): T | undefined {\n        return getEnvVar(prop) as T | undefined\n    },\n\n    getNumberOrThrow(prop: SystemProp): number {\n        const value = system.getNumber(prop)\n\n        if (isNil(value)) {\n            throw new PickUpError(\n                {\n                    code: ErrorCode.SYSTEM_PROP_NOT_DEFINED,\n                    params: {\n                        prop,\n                    },\n                },\n                `System property PU_${prop} is not defined, please check the documentation`,\n            )\n        }\n        return value\n\n    },\n    getNumber(prop: SystemProp): number | null {\n        const stringNumber = getEnvVar(prop)\n\n        if (!stringNumber) {\n            return null\n        }\n\n        const parsedNumber = Number.parseInt(stringNumber, 10)\n\n        if (Number.isNaN(parsedNumber)) {\n            return null\n        }\n\n        return parsedNumber\n    },\n\n    getBoolean(prop: SystemProp): boolean | undefined {\n        const value = getEnvVar(prop)\n\n        if (isNil(value)) {\n            return undefined\n        }\n        return value === 'true'\n    },\n\n    getList(prop: SystemProp): string[] {\n        const values = getEnvVar(prop)\n\n        if (isNil(values)) {\n            return []\n        }\n        return values.split(',').map((value) => value.trim())\n    },\n\n    getOrThrow<T extends string = string>(prop: SystemProp): T {\n        const value = getEnvVar(prop) as T | undefined\n\n        if (value === undefined) {\n            throw new PickUpError(\n                {\n                    code: ErrorCode.SYSTEM_PROP_NOT_DEFINED,\n                    params: {\n                        prop,\n                    },\n                },\n                `System property PU_${prop} is not defined, please check the documentation`,\n            )\n        }\n\n        return value\n    },\n    getEdition(): PuEdition {\n        return this.getOrThrow(AppSystemProp.EDITION) as PuEdition\n    },\n    isApp(): boolean {\n        return [ContainerType.APP].includes(\n            this.getOrThrow(SharedSystemProp.CONTAINER_TYPE) as ContainerType\n        )\n    },\n}\n\nconst getEnvVar = (prop: SystemProp): string | undefined => {\n    return process.env[`PU_${prop}`] ?? systemPropDefaultValues[prop]\n}\n","export * from './lib/common'\nexport * from './lib/flag/flag'\nexport * from './lib/authentication/dto/authentication-response'\nexport * from './lib/authentication/dto/sign-up-request'\nexport * from './lib/authentication/dto/sign-in-request'\nexport * from './lib/authentication/model/principal-type'\nexport * from './lib/authentication/model/principal'\nexport * from './lib/common/seek-page'\nexport * from './lib/common/id-generator'\nexport * from './lib/common/base-model'\nexport * from './lib/classroom'\nexport * from './lib/platform'\nexport * from './lib/authentication'\nexport * from './lib/otp'\nexport * from './lib/user'\nexport * from './lib/roles'\nexport * from './lib/classroom-member'\nexport * from './lib/classroom-role'\nexport * from './lib/invitations'\nexport * from './lib/audit-events'\n// Look at https://github.com/sinclairzx81/typebox/issues/350\nimport { TypeSystemPolicy } from '@sinclair/typebox/system'\nTypeSystemPolicy.ExactOptionalPropertyTypes = false\n","export * from './utils'\nexport * from './base-model'\nexport * from './locale'\nexport * from './security'\nexport * from './multipart-file'\nexport * from './pickup-error'\n","export * from './object-utils'\nexport * from './utils'\nexport * from './assertions'\n","import { isNil, isString } from './utils'\n\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nexport function deleteProperties(obj: Record<string, unknown>, props: string[]) {\n    const copy = { ...obj }\n    for (const prop of props) {\n        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n        delete copy[prop]\n    }\n    return copy\n}\n\n\nexport const spreadIfDefined = <T>(key: string, value: T | undefined | null): Record<string, T> => {\n    if (isNil(value)) {\n        return {}\n    }\n    return {\n        [key]: value,\n    }\n}\n\nexport function deleteProps<T extends Record<string, unknown>, K extends keyof T>(\n    obj: T,\n    prop: K[],\n): Omit<T, K> {\n    const newObj = { ...obj }\n    for (const p of prop) {\n        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n        delete newObj[p]\n    }\n    return newObj\n}\n\nexport function sanitizeObjectForPostgresql<T>(input: T): T {\n    return applyFunctionToValuesSync<T>(input, (str) => {\n        if (isString(str)) {\n            // eslint-disable-next-line no-control-regex\n            const controlCharsRegex = /\\u0000/g\n            return str.replace(controlCharsRegex, '')            \n        }\n        return str\n    })\n}\n\nexport function applyFunctionToValuesSync<T>(obj: unknown, apply: (str: unknown) => unknown): T {\n    if (isNil(obj)) {\n        return obj as T\n    }\n    else if (isString(obj)) {\n        return apply(obj) as T\n    }\n    else if (Array.isArray(obj)) {\n        for (let i = 0; i < obj.length; ++i) {\n            obj[i] = applyFunctionToValuesSync(obj[i], apply)\n        }\n    }\n    else if (isObject(obj)) {\n        const entries = Object.entries(obj)\n        for (const entry of entries) {\n            const [key, value] = entry\n            obj[key] = applyFunctionToValuesSync(value, apply)\n        }\n    }\n    return apply(obj) as T\n}\n\n\nexport async function applyFunctionToValues<T>(obj: unknown, apply: (str: unknown) => Promise<unknown>): Promise<T> {\n    if (isNil(obj)) {\n        return obj as T\n    }\n    else if (isString(obj)) {\n        return await apply(obj) as T\n    }\n    else if (Array.isArray(obj)) {\n        for (let i = 0; i < obj.length; ++i) {\n            obj[i] = await applyFunctionToValues(obj[i], apply)\n        }\n    }\n    else if (isObject(obj)) {\n        const entries = Object.entries(obj)\n        for (const entry of entries) {\n            const [key, value] = entry\n            obj[key] = await applyFunctionToValues(value, apply)\n        }\n    }\n    return await apply(obj) as T\n}\n\nexport const isObject = (obj: unknown): obj is Record<string, unknown> => {\n    return typeof obj === 'object' && obj !== null && !Array.isArray(obj)\n}\n\nexport type MakeKeyNonNullableAndRequired<T extends object, K extends keyof T> = T & { [P in K]-?: NonNullable<T[P]> }","import deepmerge from 'deepmerge'\n\nexport function isString(str: unknown): str is string {\n    return str != null && typeof str === 'string'\n}\n\nexport function isNil<T>(value: T | null | undefined): value is null | undefined {\n    return value === null || value === undefined\n}\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function setAtPath<T, K extends keyof any>(obj: T, path: K | K[], value: any): void {\n    const pathArray = Array.isArray(path) ? path : (path as string).match(/([^[.\\]])+/g) as unknown as K[]\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    pathArray.reduce((acc: any, key: K, i: number) => {\n        if (acc[key] === undefined) acc[key] = {}\n        if (i === pathArray.length - 1) acc[key] = value\n        return acc[key]\n    }, obj)\n}\n\n\nexport function debounce<T>(func: (...args: T[]) => void, wait: number): (...args: T[]) => void {\n    let timeout: NodeJS.Timeout\n\n    return function (...args: T[]) {\n        const later = () => {\n            clearTimeout(timeout)\n            func(...args)\n        }\n\n        clearTimeout(timeout)\n        timeout = setTimeout(later, wait)\n    }\n}\n\n\ntype DeepPartial<T> = {\n    [P in keyof T]?: T[P] extends Record<string, unknown> ? DeepPartial<T[P]> : T[P];\n}\n\nexport function deepMergeAndCast<T>(target: DeepPartial<T>, source: DeepPartial<T>): T {\n    return deepmerge(target as Partial<T>, source as Partial<T>) as T\n}\n\n\nexport function kebabCase(str: string): string {\n    return str\n        .replace(/([a-z])([A-Z])/g, '$1-$2') // Handle camelCase by adding hyphen between lowercase and uppercase letters\n        .replace(/\\s+/g, '-')                // Replace spaces with hyphens\n        .replace(/_/g, '-')                  // Replace underscores with hyphens\n        .toLowerCase()                       // Convert to lowercase\n        .replace(/^-+|-+$/g, '')            // Remove leading and trailing hyphens\n}\n\n\nexport function isEmpty<T>(value: T | null | undefined): boolean {\n    if (value == null) {\n        return true\n    }\n\n    if (typeof value === 'string' || Array.isArray(value)) {\n        return value.length === 0\n    }\n\n    if (typeof value === 'object') {\n        return Object.keys(value).length === 0\n    }\n\n    return false\n}\n\nexport function startCase(str: string): string {\n    return str\n        .replace(/([a-z])([A-Z])/g, '$1 $2')\n        .replace(/[_-]+/g, ' ')\n        .replace(/\\s+/g, ' ')\n        .replace(/^[a-z]/, match => match.toUpperCase())\n        .replace(/\\b[a-z]/g, match => match.toUpperCase())\n}\n\nexport function camelCase(str: string): string {\n    return str\n        .replace(/([-_][a-z])/g, group => group.toUpperCase()\n            .replace('-', '')\n            .replace('_', ''))\n}\n\n\n\n\nexport function pickBy<T extends Record<string, unknown>>(\n    object: T,\n    predicate: (value: T[keyof T], key: keyof T) => boolean,\n): Partial<T> {\n    return Object.keys(object).reduce((result: Partial<T>, key: keyof T) => {\n        if (predicate(object[key], key)) {\n            result[key] = object[key]\n        }\n        return result\n    }, {})\n}\n","module.exports = require(\"deepmerge\");","export function assertEqual<T>(\n    actual: T,\n    expected: T,\n    fieldName1: string,\n    fieldName2: string,\n    \n): asserts actual is T {\n    if (actual !== expected) {\n        throw new Error(`${fieldName1} and ${fieldName2} should be equal`)\n    }\n}\n\nexport function assertNotNullOrUndefined<T>(\n    value: T | null | undefined,\n    fieldName: string,\n): asserts value is T {\n    if (value === null || value === undefined) {\n        throw new Error(`${fieldName} is null or undefined`)\n    }\n}\n\nexport function assertNotEqual<T>(\n    value1: T,\n    value2: T,\n    fieldName1: string,\n    fieldName2: string,\n): void {\n    if (value1 === value2) {\n        throw new Error(`${fieldName1} and ${fieldName2} should not be equal`)\n    }\n}\n\n\nexport const isNotUndefined = <T>(value: T | undefined): value is T => {\n    return value !== undefined\n}\n\nexport function assertNull<T>(\n    value: T | null,\n    fieldName: string,\n): asserts value is T {\n    if (value !== null) {\n        throw new Error(`${fieldName} should be null`)\n    }\n} ","import { Static, TEnum, TSchema, Type } from '@sinclair/typebox'\n\nexport type BaseModel<T> = {\n    id: T\n    created: string\n    updated: string\n}\n\nexport const BaseModelSchema = {\n    id: Type.String(),\n    created: Type.String(),\n    updated: Type.String(),\n}\n\n// Used to generate valid nullable in OpenAPI Schema\nexport const Nullable = <T extends TSchema>(schema: T) => Type.Optional(Type.Unsafe<Static<T> | null>({\n    ...schema, nullable: true,\n}))\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function NullableEnum<T extends TEnum<any>>(schema: T) {\n    const values = schema.anyOf.map(f => f.const)\n    return Type.Optional(Type.Unsafe<Static<T> | null>({ type: 'string', enum: values, nullable: true }))\n}","module.exports = require(\"@sinclair/typebox\");","export enum LocalesEnum {\n    DUTCH = 'nl',\n    ENGLISH = 'en',\n    GERMAN = 'de',\n    ITALIAN = 'it',\n    FRENCH = 'fr',\n    BULGARIAN = 'bg',\n    UKRAINIAN = 'uk',\n    HUNGARIAN = 'hu',\n    SPANISH = 'es',\n    JAPANESE = 'ja',\n    INDONESIAN = 'id',\n    VIETNAMESE = 'vi',\n    CHINESE_SIMPLIFIED = 'zh',\n    PORTUGUESE = 'pt',\n}","export * from './permission'\n\nexport const SAFE_STRING_PATTERN = '^[^./]+$'","export enum Permission {\n    READ_CLASSROOM = 'READ_CLASSROOM',\n    WRITE_CLASSROOM = 'WRITE_CLASSROOM',\n    READ_CLASSROOM_MEMBER = 'READ_CLASSROOM_MEMBER',\n    WRITE_CLASSROOM_MEMBER = 'WRITE_CLASSROOM_MEMBER',\n    READ_INVITATION = 'READ_INVITATION',\n    WRITE_INVITATION = 'WRITE_INVITATION',\n}\n","import { Static, Type } from '@sinclair/typebox'\n\n\nexport const PuMultipartFile = Type.Object({\n    filename: Type.String(),\n    data: Type.Unknown(),\n    type: Type.Literal('file'),\n})\n\nexport type PuMultipartFile = Static<typeof PuMultipartFile> & {\n    data: Buffer\n}\n\nexport const isMultipartFile = (value: unknown): value is PuMultipartFile => {\n    return typeof value === 'object' && value !== null && 'type' in value && value.type === 'file' && 'filename' in value && 'data' in value && value.data instanceof Buffer\n}\n","import { FileId } from '../file'\nimport { UserId } from '../user'\nimport { Permission } from './security'\nimport { ClassroomId } from '../classroom'\nimport { ClassroomRole } from '../classroom-role'\n\nexport class PickUpError extends Error {\n    constructor(public error: PickUpErrorParams, message?: string) {\n        super(error.code + (message ? `: ${message}` : ''))\n    }\n}\n\nexport type PickUpErrorParams =\n    | AuthenticationParams\n    | AuthorizationErrorParams\n    | EmailIsNotVerifiedErrorParams\n    | EntityNotFoundErrorParams\n    | ExistingUserErrorParams\n    | FileNotFoundErrorParams\n    | InvalidBearerTokenParams\n    | InvalidClaimParams\n    | InvalidCloudClaimParams\n    | InvalidCredentialsErrorParams\n    | InvalidJwtTokenErrorParams\n    | InvalidOtpParams\n    | PermissionDeniedErrorParams\n    | FeatureDisabledErrorParams\n    | SystemInvalidErrorParams\n    | SystemPropNotDefinedErrorParams\n    | ValidationErrorParams\n    | UserIsInActiveErrorParams\n    | EmailAuthIsDisabledParams\n    | ExistingAlertChannelErrorParams\n    | EmailAlreadyHasActivationKey\n    | SessionExpiredParams\n    | InvalidLicenseKeyParams\n    | NoClassroomFoundErrorParams\n    | InvalidSmtpCredentialsErrorParams\nexport type BaseErrorParams<T, V> = {\n    code: T\n    params: V\n}\n\nexport type InvalidClaimParams = BaseErrorParams<ErrorCode.INVALID_CLAIM, { redirectUrl: string, tokenUrl: string, clientId: string }>\nexport type InvalidCloudClaimParams = BaseErrorParams<ErrorCode.INVALID_CLOUD_CLAIM, { pieceName: string }>\n\nexport type InvalidBearerTokenParams = BaseErrorParams<ErrorCode.INVALID_BEARER_TOKEN, {\n    message?: string\n}>\n\nexport type SessionExpiredParams = BaseErrorParams<ErrorCode.SESSION_EXPIRED, {\n    message?: string\n}>\n\nexport type FileNotFoundErrorParams = BaseErrorParams<ErrorCode.FILE_NOT_FOUND, { id: FileId }>\n\nexport type EmailAuthIsDisabledParams = BaseErrorParams<ErrorCode.EMAIL_AUTH_DISABLED, Record<string, never>>\n\nexport type AuthorizationErrorParams = BaseErrorParams<\nErrorCode.AUTHORIZATION,\nRecord<string, string> &\n{\n    message?: string\n}\n>\n\nexport type PermissionDeniedErrorParams = BaseErrorParams<\nErrorCode.PERMISSION_DENIED,\n{\n    userId: UserId\n    classroomId: ClassroomId\n    role: ClassroomRole\n    permission: Permission | undefined\n}\n>\n\nexport type SystemInvalidErrorParams = BaseErrorParams<\nErrorCode.SYSTEM_PROP_INVALID,\n{\n    prop: string\n}\n>\n\nexport type InvalidCredentialsErrorParams = BaseErrorParams<\nErrorCode.INVALID_CREDENTIALS,\nnull\n>\n\nexport type EmailIsNotVerifiedErrorParams = BaseErrorParams<\nErrorCode.EMAIL_IS_NOT_VERIFIED,\n{\n    email: string\n}\n>\n\nexport type UserIsInActiveErrorParams = BaseErrorParams<\nErrorCode.USER_IS_INACTIVE,\n{\n    email: string\n}\n>\n\nexport type ExistingUserErrorParams = BaseErrorParams<\nErrorCode.EXISTING_USER,\n{\n    email: string\n    platformId: string | null\n}\n>\n\nexport type SystemPropNotDefinedErrorParams = BaseErrorParams<\nErrorCode.SYSTEM_PROP_NOT_DEFINED,\n{\n    prop: string\n}\n>\n\nexport type InvalidJwtTokenErrorParams = BaseErrorParams<\nErrorCode.INVALID_OR_EXPIRED_JWT_TOKEN,\n{\n    token: string\n}\n>\n\nexport type EntityNotFoundErrorParams = BaseErrorParams<\nErrorCode.ENTITY_NOT_FOUND,\n{\n    message?: string\n    entityType?: string\n    entityId?: string\n}\n>\n\nexport type ValidationErrorParams = BaseErrorParams<\nErrorCode.VALIDATION,\n{\n    message: string\n}\n>\n\nexport type FeatureDisabledErrorParams = BaseErrorParams<\nErrorCode.FEATURE_DISABLED,\n{\n    message: string\n}>\n\nexport type AuthenticationParams = BaseErrorParams<\nErrorCode.AUTHENTICATION,\n{\n    message: string\n}\n>\n\nexport type ExistingAlertChannelErrorParams = BaseErrorParams<\nErrorCode.EXISTING_ALERT_CHANNEL,\n{\n    email: string\n}\n>\n\nexport type InvalidOtpParams = BaseErrorParams<ErrorCode.INVALID_OTP, Record<string, never>>\n\nexport type InvalidLicenseKeyParams = BaseErrorParams<ErrorCode.INVALID_LICENSE_KEY, {\n    key: string\n}>  \n\nexport type EmailAlreadyHasActivationKey = BaseErrorParams<ErrorCode.EMAIL_ALREADY_HAS_ACTIVATION_KEY, {\n    email: string\n}>\n\nexport type NoClassroomFoundErrorParams = BaseErrorParams<ErrorCode.NO_CLASSROOM_FOUND, {\n    email: string,\n    message?: string,\n}>\n\nexport type InvalidSmtpCredentialsErrorParams = BaseErrorParams<ErrorCode.INVALID_SMTP_CREDENTIALS, {\n    message?: string,\n}>\n\nexport enum ErrorCode {\n    AUTHENTICATION = 'AUTHENTICATION',\n    AUTHORIZATION = 'AUTHORIZATION',\n    EMAIL_IS_NOT_VERIFIED = 'EMAIL_IS_NOT_VERIFIED',\n    ENTITY_NOT_FOUND = 'ENTITY_NOT_FOUND',\n    EXISTING_ALERT_CHANNEL = 'EXISTING_ALERT_CHANNEL',\n    FILE_NOT_FOUND = 'FILE_NOT_FOUND',\n    INVALID_BEARER_TOKEN = 'INVALID_BEARER_TOKEN',\n    SESSION_EXPIRED = 'SESSION_EXPIRED',\n    INVALID_CLAIM = 'INVALID_CLAIM',\n    INVALID_CLOUD_CLAIM = 'INVALID_CLOUD_CLAIM',\n    INVALID_CREDENTIALS = 'INVALID_CREDENTIALS',\n    INVALID_OR_EXPIRED_JWT_TOKEN = 'INVALID_OR_EXPIRED_JWT_TOKEN',\n    INVALID_OTP = 'INVALID_OTP',\n    PERMISSION_DENIED = 'PERMISSION_DENIED',\n    FEATURE_DISABLED = 'FEATURE_DISABLED',\n    SYSTEM_PROP_INVALID = 'SYSTEM_PROP_INVALID',\n    SYSTEM_PROP_NOT_DEFINED = 'SYSTEM_PROP_NOT_DEFINED',\n    USER_IS_INACTIVE = 'USER_IS_INACTIVE',\n    VALIDATION = 'VALIDATION',\n    INVALID_LICENSE_KEY = 'INVALID_LICENSE_KEY',\n    EMAIL_ALREADY_HAS_ACTIVATION_KEY = 'EMAIL_ALREADY_HAS_ACTIVATION_KEY',\n    EXISTING_USER = 'EXISTING_USER',\n    EMAIL_AUTH_DISABLED = 'EMAIL_AUTH_DISABLED',\n    NO_CLASSROOM_FOUND = 'NO_CLASSROOM_FOUND',\n    INVALID_SMTP_CREDENTIALS = 'INVALID_SMTP_CREDENTIALS',\n}\n","import { BaseModel, PuId } from '@pickup/shared';\n\nexport type FlagId = PuId;\n\nexport type Flag = {\n    value: unknown;\n} & BaseModel<FlagId>;\n\nexport enum PuEnvironment {\n    PRODUCTION = 'prod',\n    DEVELOPMENT = 'dev',\n    TESTING = 'test',\n}\n\nexport enum PuEdition {\n    COMMUNITY = 'ce',\n    ENTERPRISE = 'ee',\n}\n\nexport enum PuFlagId {\n    SHOW_PLATFORM_DEMO = 'SHOW_PLATFORM_DEMO',\n    CLASSROOM_LIMITS_ENABLED = 'CLASSROOM_LIMITS_ENABLED',\n    CURRENT_VERSION = 'CURRENT_VERSION',\n    EDITION = 'EDITION',\n    ENVIRONMENT = 'ENVIRONMENT',\n    FRONTEND_URL = 'FRONTEND_URL',\n    LATEST_VERSION = 'LATEST_VERSION',\n    PRIVACY_POLICY_URL = 'PRIVACY_POLICY_URL',\n    THEME = 'THEME',\n    USER_CREATED = 'USER_CREATED',\n    TERMS_OF_SERVICE_URL = 'TERMS_OF_SERVICE_URL',\n    EMAIL_AUTH_ENABLED = 'EMAIL_AUTH_ENABLED',\n}\n","import { ClassroomMemberRole } from '../../classroom'\nimport { User } from '../../user/user'\n\nexport type UserWithoutPassword = Omit<User, 'password'>\n\nexport type AuthenticationResponse = UserWithoutPassword & {\n    token: string\n    classroomId: string\n}","import { Static, Type } from '@sinclair/typebox'\nimport { EmailType, PasswordType } from '../../user/user'\n\nexport const SignUpRequest = Type.Object({\n    email: EmailType,\n    password: PasswordType,\n    firstName: Type.String(),\n    lastName: Type.String(),\n})\n\nexport type SignUpRequest = Static<typeof SignUpRequest>\n","import { Static, Type } from '@sinclair/typebox'\nimport { BaseModelSchema } from '../common/base-model'\nimport { PuId } from '../common/id-generator'\nimport { ClassroomMemberRole } from '../classroom/classroom-member'\n\nexport type UserId = PuId\n\nexport enum UserStatus {\n    /* user is active */\n    ACTIVE = 'ACTIVE',\n    /* user account deactivated */\n    INACTIVE = 'INACTIVE',\n}\n\nexport const EmailType = Type.String({\n    format: 'email',\n})\n\nexport const PasswordType = Type.String({\n    minLength: 8,\n    maxLength: 64,\n})\n\nexport const User = Type.Object({\n    ...BaseModelSchema,\n    email: Type.String(),\n    firstName: Type.String(),\n    lastName: Type.String(),\n    password: Type.String(),\n    verified: Type.Boolean(),\n    status: Type.Enum(UserStatus),\n    platformId: Type.Union([PuId, Type.Null()]),\n    classroomRole: Type.Enum(ClassroomMemberRole),\n    tokenVersion: Type.Optional(Type.String()),\n})\n\nexport type User = Static<typeof User>\n\nexport const UserMeta = Type.Object({\n    id: Type.String(),\n    email: Type.String(),\n    firstName: Type.String(),\n    lastName: Type.String(),\n    status: Type.Enum(UserStatus),\n    platformId: Type.Union([PuId, Type.Null()]),\n    classroomRole: Type.Enum(ClassroomMemberRole),\n    created: Type.String(),\n    updated: Type.String(),\n})\n\nexport type UserMeta = Static<typeof UserMeta>\n","import { Static, Type } from '@sinclair/typebox'\nimport { customAlphabet } from 'nanoid'\n\nconst ALPHABET = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'\nconst ID_LENGTH = 21\n\nexport const PuId = Type.String({\n    pattern: `^[0-9a-zA-Z]{${ID_LENGTH}}$`,\n})\n\nexport type PuId = Static<typeof PuId>\n\nexport const puId = customAlphabet(ALPHABET, ID_LENGTH)\n\nexport const securePuId = (length: number) => customAlphabet(ALPHABET, length)()\n","module.exports = require(\"nanoid\");","export enum ClassroomMemberRole {\n    STUDENT = 'STUDENT',\n    TEACHER = 'TEACHER',\n}\n\n","import { Static, Type } from '@sinclair/typebox'\nimport { EmailType, PasswordType } from '../../user/user'\n\nexport const SignInRequest = Type.Object({\n    email: EmailType,\n    password: PasswordType,\n})\n\nexport type SignInRequest = Static<typeof SignInRequest>\n","export enum PrincipalType {\n    USER = 'USER',\n    SERVICE = 'SERVICE',\n    UNKNOWN = 'UNKNOWN',\n\n    /**\n     * @deprecated\n     */\n    SUPER_USER = 'SUPER_USER',\n}\n\nexport const ALL_PRINCIPAL_TYPES = Object.values(PrincipalType)\n\nexport const SERVICE_KEY_SECURITY_OPENAPI = {\n    apiKey: [],\n}\n\nexport enum EndpointScope {\n    PLATFORM = 'PLATFORM',\n    CLASSROOM = 'CLASSROOM',\n}\n","import { ClassroomId } from '../../classroom/classroom'\nimport { PuId } from '../../common/id-generator'\nimport { PrincipalType } from './principal-type'\n\nexport type Principal = {\n    id: PuId\n    type: PrincipalType\n    classroomId: ClassroomId\n    platform: {\n        id: PuId\n    }\n    tokenVersion?: string\n}","import { TSchema, Type } from '@sinclair/typebox'\nimport { Nullable } from './base-model'\n\nexport type Cursor = string | null\n\nexport type SeekPage<T> = {\n    next: Cursor\n    previous: Cursor\n    data: T[]\n}\n\nexport const SeekPage = (t: TSchema): TSchema => Type.Object({\n    data: Type.Array(t),\n    next: Nullable(Type.String({ description: 'Cursor to the next page' })),\n    previous: Nullable(Type.String({ description: 'Cursor to the previous page' })),\n})\n","export * from './classroom'\nexport * from './classroom-member'\nexport * from './classroom-member.request'","import { Static, Type } from '@sinclair/typebox';\nimport { BaseModelSchema, Nullable, PuId } from '@pickup/shared';\nimport { ClassroomMemberRole } from './classroom-member';\nimport { SAFE_STRING_PATTERN } from '../common';\n\nexport const ListProjectRequestForUserQueryParams = Type.Object({\n    cursor: Type.Optional(Type.String()),\n    limit: Type.Optional(Type.Number()),\n})\n\nexport type ListProjectRequestForUserQueryParams = Static<typeof ListProjectRequestForUserQueryParams>\n\nexport type ClassroomId = PuId;\n\nexport type ClassroomPlanId = string;\n\nexport const SwitchClassroomResponse = Type.Object({\n    token: Type.String(),\n    classroomRole: Type.Union([Type.Enum(ClassroomMemberRole), Type.Null()]),\n})\n\nexport type SwitchClassroomResponse = Static<typeof SwitchClassroomResponse>\n\n\nexport const Classroom = Type.Object({\n    ...BaseModelSchema,\n    deleted: Nullable(Type.String()),\n    ownerId: Type.String(),\n    displayName: Type.String(),\n    platformId: PuId,\n})\n\nexport type Classroom = Static<typeof Classroom>\n\nexport const ActiveClassroom = Type.Omit(Classroom, ['deleted'])\n\nexport type ActiveClassroom = Static<typeof ActiveClassroom>\n\nexport const UpdateClassroomBody = Type.Object({\n    displayName: Type.Optional(Type.String({\n        pattern: SAFE_STRING_PATTERN,\n    })),\n})\n\nexport type UpdateClassroomBody = Static<typeof UpdateClassroomBody>\n","import { Static } from \"@sinclair/typebox\";\n\nimport { Type } from \"@sinclair/typebox\";\n\nexport const ListClassroomMembersRequestQuery = Type.Object({\n    classroomId: Type.String(),\n    classroomRoleId: Type.Optional(Type.String()),\n    cursor: Type.Optional(Type.String()),\n    limit: Type.Optional(Type.Number()),\n});\n\nexport type ListClassroomMembersRequestQuery = Static<typeof ListClassroomMembersRequestQuery>;","export * from './platform.model'\nexport * from './platform.request'\nexport * from './platform-classroom.request'","import { Static, Type } from '@sinclair/typebox'\nimport { LocalesEnum } from '../common'\nimport { BaseModelSchema } from '../common/base-model'\nimport { PuId } from '../common/id-generator'\nimport { SMTPInformation } from '../invitations'\n\nexport type PlatformId = PuId\n\nexport const Platform = Type.Object({\n    ...BaseModelSchema,\n    ownerId: PuId,\n    name: Type.String(),\n    primaryColor: Type.String(),\n    logoIconUrl: Type.String(),\n    fullLogoUrl: Type.String(),\n    favIconUrl: Type.String(),\n    smtp: Type.Optional(SMTPInformation),\n    auditLogEnabled: Type.Boolean(),\n    customAppearanceEnabled: Type.Boolean(),\n    classroomRolesEnabled: Type.Boolean(),\n    alertsEnabled: Type.Boolean(),\n    defaultLocale: Type.Optional(Type.Enum(LocalesEnum)),\n    licenseKey: Type.Optional(Type.String()),\n})\n\nexport type Platform = Static<typeof Platform>","export * from './invitation'","import { Static, Type } from '@sinclair/typebox'\nimport { BaseModelSchema, Nullable, NullableEnum } from '../common'\nimport { ClassroomRole } from '../classroom-role/classroom-role'\n\nexport enum InvitationType {\n    STAFF = 'STAFF',\n    CLASSROOM = 'CLASSROOM',\n}\n\nexport enum InvitationStatus {\n    PENDING = 'PENDING',\n    ACCEPTED = 'ACCEPTED',\n}\n\nexport const SMTPInformation = Type.Object({\n    user: Type.String(),\n    senderEmail: Type.String(),\n    senderName: Type.String(),\n    password: Type.String(),\n    host: Type.String(),\n    port: Type.Number(),\n})\n\nexport type SMTPInformation = Static<typeof SMTPInformation>\n\nexport const UserInvitation = Type.Object({\n    ...BaseModelSchema,\n    email: Type.String(),\n    status: Type.Enum(InvitationStatus),\n    type: Type.Enum(InvitationType),\n    platformId: Type.String(),\n    platformRole: NullableEnum(Type.Enum(ClassroomRole)),\n    projectId: Nullable(Type.String()),\n    classroomId: Nullable(Type.String()),\n    classroomRole: Nullable(Type.Enum(ClassroomRole)),\n})\n\nexport type UserInvitation = Static<typeof UserInvitation>\n\nexport const UserInvitationWithLink = Type.Composite([UserInvitation, Type.Object({\n    link: Type.Optional(Type.String()),\n})])\n\nexport type UserInvitationWithLink = Static<typeof UserInvitationWithLink>\n\nexport const SendUserInvitationRequest = Type.Union([\n    Type.Object({\n        type: Type.Literal(InvitationType.CLASSROOM),\n        email: Type.String(),\n        classroomId: Type.String(),\n        classroomRole: Type.Enum(ClassroomRole),\n    }),\n    Type.Object({\n        type: Type.Literal(InvitationType.STAFF),\n        email: Type.String(),\n        classroomRole: Type.Enum(ClassroomRole),\n    }),\n])\n\n\nexport type SendUserInvitationRequest = Static<typeof SendUserInvitationRequest>\n\nexport const AcceptUserInvitationRequest = Type.Object({\n    invitationToken: Type.String(),\n})\n\nexport type AcceptUserInvitationRequest = Static<typeof AcceptUserInvitationRequest>\n\nexport const ListUserInvitationsRequest = Type.Object({\n    limit: Type.Optional(Type.Number()),\n    cursor: Type.Optional(Type.String()),\n    type: Type.Enum(InvitationType),\n    projectId: Nullable(Type.String()),\n    status: Type.Optional(Type.Enum(InvitationStatus)),\n})\n\nexport type ListUserInvitationsRequest = Static<typeof ListUserInvitationsRequest>\n","import { Static, Type } from '@sinclair/typebox'\nimport { BaseModelSchema } from '../common'\n\nexport const ClassroomRole = Type.Object({\n    ...BaseModelSchema,\n    name: Type.String(),\n    permissions: Type.Array(Type.String()),\n    platformId: Type.Optional(Type.String()),\n    type: Type.String(),\n})\n\nexport type ClassroomRole = Static<typeof ClassroomRole>","import { Static, Type } from '@sinclair/typebox'\nimport { LocalesEnum } from '../common'\nimport { PuId } from '../common/id-generator'\n\nexport const UpdatePlatformRequestBody = Type.Object({\n    name: Type.Optional(Type.String()),\n    primaryColor: Type.Optional(Type.String()),\n    logoIconUrl: Type.Optional(Type.String()),\n    fullLogoUrl: Type.Optional(Type.String()),\n    favIconUrl: Type.Optional(Type.String()),\n    defaultLocale: Type.Optional(Type.Enum(LocalesEnum)),\n})\n\nexport type UpdatePlatformRequestBody = Static<typeof UpdatePlatformRequestBody>\n\nexport const AdminAddPlatformRequestBody = Type.Object({\n    userId: PuId,\n    classroomId: PuId,\n    name: Type.String(),\n})\n\nexport type AdminAddPlatformRequestBody = Static<typeof AdminAddPlatformRequestBody>\n","import { Static, Type } from \"@sinclair/typebox\";\n\nexport const UpdatePlatformClassroomBody = Type.Object({\n    displayName: Type.Optional(Type.String()),\n})\n\nexport type UpdatePlatformClassroomBody = Static<typeof UpdatePlatformClassroomBody>;\n\nexport const CreatePlatformClassroomBody = Type.Object({\n    displayName: Type.String(),\n})\n\nexport type CreatePlatformClassroomBody = Static<typeof CreatePlatformClassroomBody>;\n","export * from './requests'\n","import { Static, Type } from '@sinclair/typebox'\nimport { PuId } from '../common/id-generator';\n\nexport const VerifyEmailRequestBody = Type.Object({\n    userId: PuId,\n    otp: Type.String(),\n})\nexport type VerifyEmailRequestBody = Static<typeof VerifyEmailRequestBody>;\n\nexport const ResetPasswordRequestBody = Type.Object({\n    userId: PuId,\n    otp: Type.String(),\n    newPassword: Type.String(),\n})\nexport type ResetPasswordRequestBody = Static<typeof ResetPasswordRequestBody>;","export * from './otp-model'\nexport * from './otp-requests'\nexport * from './otp-type'\n","import { Static, Type } from '@sinclair/typebox';\nimport { BaseModelSchema, PuId } from '@pickup/shared';\nimport { OtpType } from './otp-type';\n\nexport enum OtpState {\n    PENDING = 'PENDING',\n    CONFIRMED = 'CONFIRMED',\n}\n\nexport const OtpModel = Type.Object({\n    ...BaseModelSchema,\n    type: Type.Enum(OtpType),\n    userId: PuId,\n    value: Type.String(),\n    state: Type.Enum(OtpState),\n});\n\nexport type OtpModel = Static<typeof OtpModel>;\n","export enum OtpType {\n    EMAIL_VERIFICATION = 'EMAIL_VERIFICATION',\n    PASSWORD_RESET = 'PASSWORD_RESET',\n}\n","import { Static, Type } from '@sinclair/typebox'\nimport { OtpType } from './otp-type'\n\n\nexport const CreateOtpRequestBody = Type.Object({\n    email: Type.String(),\n    type: Type.Enum(OtpType),\n})\n\nexport type CreateOtpRequestBody = Static<typeof CreateOtpRequestBody>\n\n","import { Static, Type } from '@sinclair/typebox'\nimport { UserStatus } from './user'\n\nexport * from './user-dto'\nexport * from './user'\n\nexport const UpdateUserRequestBody = Type.Object({\n    status: Type.Optional(Type.Enum(UserStatus)),\n})\n\nexport type UpdateUserRequestBody = Static<typeof UpdateUserRequestBody>\n\n","import { Static, Type } from '@sinclair/typebox'\nimport { User } from './user'\n\nexport const UserResponse = Type.Omit(User, ['password'])\n\nexport type UserResponse = Static<typeof UserResponse>\n","export * from './permissions'","import { Permission } from '../common/security/permission'\n\nexport enum DefaultClassroomRole {\n    STUDENT = 'STUDENT',\n    TEACHER = 'TEACHER',\n}\n\nexport enum RoleType {\n    DEFAULT = 'DEFAULT',\n    CUSTOM = 'CUSTOM',\n}\n\nexport const rolePermissions: Record<DefaultClassroomRole, Permission[]> = {\n    [DefaultClassroomRole.STUDENT]: [\n        Permission.READ_CLASSROOM,\n        Permission.READ_CLASSROOM_MEMBER,\n        Permission.READ_INVITATION,\n    ],\n    [DefaultClassroomRole.TEACHER]: [\n        Permission.READ_CLASSROOM,\n        Permission.WRITE_CLASSROOM,\n        Permission.READ_CLASSROOM_MEMBER,\n        Permission.WRITE_CLASSROOM_MEMBER,\n        Permission.READ_INVITATION,\n    ],\n}\n","export * from \"./classroom-member\";","import { Static, Type } from \"@sinclair/typebox\";\nimport { BaseModelSchema, ClassroomRole, PuId, UserMeta } from \"@pickup/shared\";\n\nexport type ClassroomMemberId = string;\n\nexport const ClassroomMember = Type.Object({\n    ...BaseModelSchema,\n    platformId: PuId,\n    userId: PuId,\n    classroomId: Type.String(),\n    classroomRoleId: PuId,\n}, {\n    description: \"Classroom member is which user is assigned to a classroom.\"\n});\n\nexport type ClassroomMember = Static<typeof ClassroomMember>;\n\nexport const ClassroomMemberWithUser = Type.Composite([ClassroomMember, Type.Object({\n    user: UserMeta,\n    classroomRole: ClassroomRole,\n})])\n\nexport type ClassroomMemberWithUser = Static<typeof ClassroomMemberWithUser>;","export * from './classroom-role'\nexport * from './classroom-role.request'","import { Static, Type } from '@sinclair/typebox'\nimport { SAFE_STRING_PATTERN } from '../common'\nimport { RoleType } from '../roles'\n\nexport const CreateClassroomRoleRequestBody = Type.Object({\n    name: Type.String({\n        pattern: SAFE_STRING_PATTERN,\n    }),\n    permissions: Type.Array(Type.String()),\n    type: Type.Enum(RoleType),\n})\n\nexport type CreateClassroomRoleRequestBody = Static<typeof CreateClassroomRoleRequestBody>\n\nexport const UpdateClassroomRoleRequestBody = Type.Object({\n    name: Type.Optional(Type.String({\n        pattern: SAFE_STRING_PATTERN,\n    })),\n    permissions: Type.Optional(Type.Array(Type.String())),\n})\n\nexport type UpdateClassroomRoleRequestBody = Static<typeof UpdateClassroomRoleRequestBody>\n","export * from './audit-event'\n","import { Static, Type } from '@sinclair/typebox';\nimport {\n  BaseModelSchema,\n  ClassroomRole,\n  User,\n} from '@pickup/shared';\n\nexport const ListAuditEventsRequest = Type.Object({\n  limit: Type.Optional(Type.Number()),\n  cursor: Type.Optional(Type.String()),\n  action: Type.Optional(Type.String()),\n  classroomId: Type.Optional(Type.Array(Type.String())),\n  userId: Type.Optional(Type.String()),\n  createdBefore: Type.Optional(Type.String()),\n  createdAfter: Type.Optional(Type.String()),\n});\n\nexport type ListAuditEventsRequest = Static<typeof ListAuditEventsRequest>;\n\nconst UserMeta = Type.Pick(User, ['email', 'id', 'firstName', 'lastName']);\n\nexport enum ApplicationEventName {\n  USER_SIGNED_IN = 'user.signed.in',\n  USER_PASSWORD_RESET = 'user.password.reset',\n  USER_EMAIL_VERIFIED = 'user.email.verified',\n  CLASSROOM_ROLE_CREATED = 'classroom.role.created',\n  CLASSROOM_ROLE_DELETED = 'classroom.role.deleted',\n  CLASSROOM_ROLE_UPDATED = 'classroom.role.updated',\n}\n\nconst BaseAuditEventProps = {\n  ...BaseModelSchema,\n  platformId: Type.String(),\n  classroomId: Type.Optional(Type.String()),\n  classroomDisplayName: Type.Optional(Type.String()),\n  userId: Type.Optional(Type.String()),\n  userEmail: Type.Optional(Type.String()),\n  ip: Type.Optional(Type.String()),\n};\n\nexport const AuthenticationEvent = Type.Object({\n  ...BaseAuditEventProps,\n  action: Type.Union([\n    Type.Literal(ApplicationEventName.USER_SIGNED_IN),\n    Type.Literal(ApplicationEventName.USER_PASSWORD_RESET),\n    Type.Literal(ApplicationEventName.USER_EMAIL_VERIFIED),\n  ]),\n  data: Type.Object({\n    user: Type.Optional(UserMeta),\n  }),\n});\n\nexport type AuthenticationEvent = Static<typeof AuthenticationEvent>;\n\nexport const ClassroomRoleEvent = Type.Object({\n  ...BaseAuditEventProps,\n  action: Type.Union([\n    Type.Literal(ApplicationEventName.CLASSROOM_ROLE_CREATED),\n    Type.Literal(ApplicationEventName.CLASSROOM_ROLE_UPDATED),\n    Type.Literal(ApplicationEventName.CLASSROOM_ROLE_DELETED),\n  ]),\n  data: Type.Object({\n    classroomRole: Type.Pick(ClassroomRole, [\n      'id',\n      'created',\n      'updated',\n      'name',\n      'permissions',\n      'platformId',\n    ]),\n  }),\n});\n\nexport type ClassroomRoleEvent = Static<typeof ClassroomRoleEvent>;\n\n\nexport const ApplicationEvent = Type.Union([\n  AuthenticationEvent,\n  ClassroomRoleEvent,\n]);\n\nexport type ApplicationEvent = Static<typeof ApplicationEvent>;\n\nexport function summarizeApplicationEvent(event: ApplicationEvent) {\n  switch (event.action) {\n    case ApplicationEventName.USER_SIGNED_IN:\n      return `User ${event.userEmail} signed in`;\n    case ApplicationEventName.USER_PASSWORD_RESET:\n      return `User ${event.userEmail} reset password`;\n    case ApplicationEventName.USER_EMAIL_VERIFIED:\n      return `User ${event.userEmail} verified email`;\n    case ApplicationEventName.CLASSROOM_ROLE_CREATED:\n      return `${event.data.classroomRole.name} is created`;\n    case ApplicationEventName.CLASSROOM_ROLE_UPDATED:\n      return `${event.data.classroomRole.name} is updated`;\n    case ApplicationEventName.CLASSROOM_ROLE_DELETED:\n      return `${event.data.classroomRole.name} is deleted`;\n  }\n}\n\n","module.exports = require(\"@sinclair/typebox/system\");","export type SystemProp = AppSystemProp | SharedSystemProp\n\nexport enum AppSystemProp {\n    DB_TYPE = 'DB_TYPE',\n    ENCRYPTION_KEY = 'ENCRYPTION_KEY',\n    JWT_SECRET = 'JWT_SECRET',\n    MAX_FILE_SIZE_MB = 'MAX_FILE_SIZE_MB',\n\n    FIREBASE_HASH_PARAMETERS = 'FIREBASE_HASH_PARAMETERS',\n    LICENSE_KEY = 'LICENSE_KEY',\n    POSTGRES_DATABASE = 'POSTGRES_DATABASE',\n    POSTGRES_HOST = 'POSTGRES_HOST',\n    POSTGRES_PASSWORD = 'POSTGRES_PASSWORD',\n    POSTGRES_PORT = 'POSTGRES_PORT',\n    POSTGRES_SSL_CA = 'POSTGRES_SSL_CA',\n    POSTGRES_URL = 'POSTGRES_URL',\n    POSTGRES_USERNAME = 'POSTGRES_USERNAME',\n    POSTGRES_USE_SSL = 'POSTGRES_USE_SSL',\n    EDITION = 'EDITION',\n    API_RATE_LIMIT_AUTHN_MAX = 'API_RATE_LIMIT_AUTHN_MAX',\n    API_RATE_LIMIT_AUTHN_WINDOW = 'API_RATE_LIMIT_AUTHN_WINDOW',\n    API_RATE_LIMIT_AUTHN_ENABLED = 'API_RATE_LIMIT_AUTHN_ENABLED',\n    SMTP_SENDER_NAME = 'SMTP_SENDER_NAME',\n    SMTP_SENDER_EMAIL = 'SMTP_SENDER_EMAIL',\n    SMTP_HOST = 'SMTP_HOST',\n    SMTP_PORT = 'SMTP_PORT',\n    SMTP_USERNAME = 'SMTP_USERNAME',\n    SMTP_PASSWORD = 'SMTP_PASSWORD',\n    SHOW_PLATFORM_DEMO = 'SHOW_PLATFORM_DEMO',\n}\n\nexport enum SharedSystemProp  {\n    LOG_LEVEL = 'LOG_LEVEL',\n    LOG_PRETTY = 'LOG_PRETTY',\n    ENVIRONMENT = 'ENVIRONMENT',\n    FRONTEND_URL = 'FRONTEND_URL',\n    CONTAINER_TYPE = 'CONTAINER_TYPE',\n    EMAIL_AUTH_ENABLED = 'EMAIL_AUTH_ENABLED',\n    // Cloud Only & Enterprise Only\n    SENTRY_DSN = 'SENTRY_DSN',\n    LOKI_PASSWORD = 'LOKI_PASSWORD',\n    LOKI_URL = 'LOKI_URL',\n    LOKI_USERNAME = 'LOKI_USERNAME',\n\n}","import * as Sentry from '@sentry/node'\n\nlet sentryInitialized = false\n\nexport const exceptionHandler = {\n    initializeSentry: (sentryDsn: string | undefined) => {\n        if (!sentryDsn) {\n            return\n        }\n        sentryInitialized = true\n        Sentry.init({\n            dsn: sentryDsn,\n            beforeSend: (event) => {\n                if (event?.exception?.values?.[0].type === 'AxiosError') {\n                    return null\n                }\n                const value = event?.exception?.values?.[0]?.value\n                if (value && ['EXECUTION_TIMEOUT', 'ENTITY_NOT_FOUND'].includes(value)) {\n                    return null\n                }\n                return event\n            },\n        })\n    },\n    handle: (e: unknown): void => {\n        if (sentryInitialized) {\n            Sentry.captureException(e)\n        }\n    },\n}\n\n\n\nexport const enrichErrorContext = ({\n    error,\n    key,\n    value,\n}: EnrichErrorContextParams): unknown => {\n\n\n    if (error instanceof Error) {\n        if ('context' in error && error.context instanceof Object) {\n            const enrichedError = Object.assign(error, {\n                ...error.context,\n                [key]: value,\n            })\n\n            return enrichedError\n        }\n        else {\n            const enrichedError = Object.assign(error, {\n                context: {\n                    [key]: value,\n                },\n            })\n\n            return enrichedError\n        }\n    }\n\n    return error\n}\n\ntype EnrichErrorContextParams = {\n    error: unknown\n    key: string\n    value: unknown\n}\n","module.exports = require(\"@sentry/node\");","import { createHash, randomBytes } from 'node:crypto'\nimport { promisify } from 'node:util'\n\nconst randomBytesPromisified = promisify(randomBytes)\n\nconst generateRandomPassword = async (): Promise<string> => {\n    const passwordBytes = await randomBytesPromisified(32)\n    return passwordBytes.toString('hex')\n}\n\nfunction hashSHA256(input: string): string {\n    const hash = createHash('sha256')\n    hash.update(input)\n    return hash.digest('hex')\n}\n\nexport const cryptoUtils = {\n    generateRandomPassword,\n    hashSHA256,\n}","module.exports = require(\"node:crypto\");","module.exports = require(\"node:util\");","export class ApSemaphore {\n    private maxConcurrent: number\n    private queue: (() => void)[]\n    private currentConcurrent: number\n\n    constructor(maxConcurrent: number) {\n        this.maxConcurrent = maxConcurrent\n        this.queue = []\n        this.currentConcurrent = 0\n    }\n\n    async acquire() {\n        if (this.currentConcurrent >= this.maxConcurrent) {\n            await new Promise<void>((resolve) => this.queue.push(resolve))\n        }\n        this.currentConcurrent++\n    }\n\n    release() {\n        this.currentConcurrent--\n        if (this.queue.length > 0) {\n            const nextResolver = this.queue.shift()\n            nextResolver?.()\n        }\n    }\n}","import { logger } from './logger'\n\nexport function rejectedPromiseHandler(promise: Promise<unknown>) {\n    promise.catch((error) => {\n        logger.error(error)\n    })\n}\n","import pino, { Level, Logger } from 'pino'\nimport 'pino-loki'\nimport { system } from './system/system'\nimport { SharedSystemProp } from './system/system-prop'\n\nconst lokiUrl = system.get(SharedSystemProp.LOKI_URL)\nconst lokiUsername = system.get(SharedSystemProp.LOKI_USERNAME)\nconst lokiPassword = system.get(SharedSystemProp.LOKI_PASSWORD)\n\nconst initLogger = (): Logger => {\n    const level = system.get<Level>(SharedSystemProp.LOG_LEVEL) ?? 'info'\n    const pretty = system.getBoolean(SharedSystemProp.LOG_PRETTY) ?? false\n\n    if (pretty) {\n        return pino({\n            level,\n            transport: {\n                target: 'pino-pretty',\n                options: {\n                    translateTime: 'HH:MM:ss Z',\n                    colorize: true,\n                    ignore: 'pid,hostname',\n                },\n            },\n        })\n    }\n\n    const targets = [\n        {\n            target: 'pino/file',\n            level,\n            options: {},\n        },\n    ]\n\n    if (lokiUrl) {\n        targets.push({\n            target: 'pino-loki',\n            level,\n            options: {\n                batching: true,\n                interval: 5,\n                host: lokiUrl,\n                basicAuth:\n          lokiPassword && lokiPassword\n              ? {\n                  username: lokiUsername,\n                  password: lokiPassword,\n              }\n              : undefined,\n            },\n        })\n    }\n\n    return pino({ level, transport: { targets } })\n}\n\nexport const logger = initLogger()\n","module.exports = require(\"pino\");","module.exports = require(\"pino-loki\");","import { exec as execCallback } from 'node:child_process'\nimport { promisify } from 'node:util'\n\nexport const exec = promisify(execCallback)\n","module.exports = require(\"node:child_process\");","import { ActiveClassroom, ApplicationEventName, AuthenticationEvent, Classroom, ClassroomRoleEvent, isNil, PuEdition, PuEnvironment } from '@pickup/shared'\nimport { AppSystemProp, logger, rejectedPromiseHandler, SharedSystemProp, system } from '@pickup/server-shared'\nimport swagger from '@fastify/swagger'\nimport { FastifyInstance, FastifyRequest, HTTPMethods } from 'fastify'\nimport fastifySocketIO from 'fastify-socket.io'\nimport { Socket } from 'socket.io'\nimport { accessTokenManager } from './authentication/lib/access-token-manager'\nimport { securityHandlerChain } from './core/security/security-handler-chain'\nimport { websocketService } from './websockets/websockets.service'\nimport { openapiModule } from './helper/openapi/openapi.module'\nimport { validateEnvPropsOnStartup } from './helper/system-validator'\nimport { eventsHooks } from './helper/application-events'\n\nexport const setupApp = async (app: FastifyInstance): Promise<FastifyInstance> => {\n\n    await app.register(swagger, {\n        hideUntagged: true,\n        openapi: {\n            servers: [\n                {\n                    url: 'https://cloud.activepieces.com/api',\n                    description: 'Production Server',\n                },\n            ],\n            components: {\n                securitySchemes: {\n                    apiKey: {\n                        type: 'http',\n                        description: 'Use your api key generated from the admin console',\n                        scheme: 'bearer',\n                    },\n                },\n                schemas: {\n                    [ApplicationEventName.USER_SIGNED_IN]: AuthenticationEvent,\n                    [ApplicationEventName.USER_PASSWORD_RESET]: AuthenticationEvent,\n                    [ApplicationEventName.USER_EMAIL_VERIFIED]: AuthenticationEvent,\n                    [ApplicationEventName.CLASSROOM_ROLE_CREATED]: ClassroomRoleEvent,\n                    [ApplicationEventName.CLASSROOM_ROLE_DELETED]: ClassroomRoleEvent,\n                    [ApplicationEventName.CLASSROOM_ROLE_UPDATED]: ClassroomRoleEvent,\n                },\n            },\n            info: {\n                title: 'Activepieces Documentation',\n                version: '0.0.0',\n            },\n            externalDocs: {\n                url: 'https://www.activepieces.com/docs',\n                description: 'Find more info here',\n            },\n        },\n    })\n\n    await app.register(fastifySocketIO, {\n        cors: {\n            origin: '*',\n        },\n        transports: ['websocket'],\n    })\n\n    app.io.use((socket: Socket, next: (err?: Error) => void) => {\n        accessTokenManager\n            .verifyPrincipal(socket.handshake.auth.token)\n            .then(() => {\n                next()\n            })\n            .catch(() => {\n                next(new Error('Authentication error'))\n            })\n    })\n\n    app.io.on('connection', (socket: Socket) => {\n        rejectedPromiseHandler(websocketService.init(socket))\n    })\n\n    app.addHook('onRequest', async (request, reply) => {\n        const route = app.hasRoute({\n            method: request.method as HTTPMethods,\n            url: request.url,\n        })\n        if (!route) {\n            return reply.code(404).send({\n                statusCode: 404,\n                error: 'Not Found',\n                message: 'Route not found',\n            })\n        }\n    })\n\n    app.addHook('preHandler', securityHandlerChain)\n    await app.register(openapiModule)\n\n    app.get(\n        '/redirect',\n        async (\n            request: FastifyRequest<{ Querystring: { code: string } }>,\n            reply,\n        ) => {\n            const params = {\n                code: request.query.code,\n            }\n            if (!params.code) {\n                return reply.send('The code is missing in url')\n            }\n            else {\n                return reply\n                    .type('text/html')\n                    .send(\n                        `<script>if(window.opener){window.opener.postMessage({ 'code': '${encodeURIComponent(\n                            params.code,\n                        )}' },'*')}</script> <html>Redirect succuesfully, this window should close now</html>`,\n                    )\n            }\n        },\n    )\n\n    await validateEnvPropsOnStartup()\n\n    const edition = system.getEdition()\n    logger.info({\n        edition,\n    }, 'Activepieces Edition')\n    switch (edition) {\n        case PuEdition.COMMUNITY:\n            break\n        case PuEdition.ENTERPRISE:\n            break\n    }\n\n    app.addHook('onClose', async () => {\n        logger.info('Shutting down')\n    })\n\n    return app\n}\n\n\nexport async function appPostBoot(): Promise<void> {\n    logger.info(`\n\n    \n    \n    \n\n    ==========================================\n    The application started on ${system.get(SharedSystemProp.FRONTEND_URL)}\n    ==========================================`)\n\n    const environment = system.get(SharedSystemProp.ENVIRONMENT)\n    if (environment === PuEnvironment.DEVELOPMENT) {\n        logger.warn(\n            `[WARNING]: The application is running in ${environment} mode.`,\n        )\n    }\n    // const oldestPlatform = await platformService.getOldestPlatform()\n    // const key = system.get<string>(AppSystemProp.LICENSE_KEY)\n    // if (!isNil(oldestPlatform) && !isNil(key)) {\n    //     await platformService.update({\n    //         id: oldestPlatform.id,\n    //         licenseKey: key,\n    //     })\n    // }\n}\n","module.exports = require(\"@fastify/swagger\");","module.exports = require(\"fastify-socket.io\");","import { assertNotNullOrUndefined, ErrorCode, PickUpError, PlatformId, Principal, PrincipalType } from '@pickup/shared'\nimport dayjs from 'dayjs'\nimport { jwtUtils } from '../../helper/jwt-utils'\n\nexport const accessTokenManager = {\n    async generateToken(principal: Principal, expiresInSeconds: number = dayjs.duration(7, 'day').asSeconds()): Promise<string> {\n        const secret = await jwtUtils.getJwtSecret()\n        return jwtUtils.sign({\n            payload: principal,\n            key: secret,\n            expiresInSeconds,\n        })\n    },\n\n    async verifyPrincipal(token: string): Promise<Principal> {\n        const secret = await jwtUtils.getJwtSecret()\n\n        try {\n            const decoded = await jwtUtils.decodeAndVerify<Principal>({\n                jwt: token,\n                key: secret,\n            })\n            assertNotNullOrUndefined(decoded.type, 'decoded.type')\n            await assertUserSession(decoded)\n            return decoded\n        }\n        catch (e) {\n            if (e instanceof PickUpError) {\n                throw e\n            }\n            throw new PickUpError({\n                code: ErrorCode.INVALID_BEARER_TOKEN,\n                params: {\n                    message: 'invalid access token or session expired',\n                },\n            })\n        }\n    },\n}\n\nasync function assertUserSession(decoded: Principal): Promise<void> {\n    if (decoded.type !== PrincipalType.USER) return\n    \n    // const user = await userService.getOneOrFail({ id: decoded.id })\n    // const identity = await userIdentityService(system.globalLogger()).getOneOrFail({ id: user.identityId })\n    // const isExpired = (identity.tokenVersion ?? null) !== (decoded.tokenVersion ?? null)\n    // if (isExpired || user.status === UserStatus.INACTIVE || !identity.verified) {\n    //     throw new ActivepiecesError({\n    //         code: ErrorCode.SESSION_EXPIRED,\n    //         params: {\n    //             message: 'The session has expired or the user is not verified.',\n    //         },\n    //     })\n    // }\n}\n\n// type GenerateEngineTokenParams = {\n//     projectId: ProjectId\n//     queueToken?: string\n//     jobId?: string\n//     platformId: PlatformId\n// }\n","module.exports = require(\"dayjs\");","import { AppSystemProp, system } from '@pickup/server-shared'\nimport {\n    PickUpError,\n    ErrorCode,\n    isNil,\n    spreadIfDefined,\n} from '@pickup/shared'\nimport jwtLibrary, {\n    DecodeOptions,\n    SignOptions,\n    VerifyOptions,\n} from 'jsonwebtoken'\n\nexport enum JwtSignAlgorithm {\n    HS256 = 'HS256',\n    RS256 = 'RS256',\n}\n\nconst ONE_WEEK = 7 * 24 * 3600\nconst KEY_ID = '1'\nconst ISSUER = 'activepieces'\nconst ALGORITHM = JwtSignAlgorithm.HS256\n\nlet secret: string | null = null\n\nconst getSecret = async (): Promise<string> => {\n    if (secret !== null) {\n        return secret\n    }\n    secret = system.get(AppSystemProp.JWT_SECRET) ?? null\n\n    if (isNil(secret)) {\n        throw new PickUpError(\n            {\n                code: ErrorCode.SYSTEM_PROP_INVALID,\n                params: {\n                    prop: AppSystemProp.JWT_SECRET,\n                },\n            },\n            `System property PICKUP_${AppSystemProp.JWT_SECRET} must be defined`,\n        )\n    }\n    return secret\n}\n\nexport const jwtUtils = {\n    async sign({\n        payload,\n        key,\n        expiresInSeconds = ONE_WEEK,\n        keyId = KEY_ID,\n        algorithm = ALGORITHM,\n    }: SignParams): Promise<string> {\n        const signOptions: SignOptions = {\n            algorithm,\n            keyid: keyId,\n            expiresIn: expiresInSeconds,\n            issuer: ISSUER,\n        }\n        return new Promise((resolve, reject) => {\n            jwtLibrary.sign(payload, key, signOptions, (err, token) => {\n                if (err) {\n                    return reject(err)\n                }\n\n                if (isNil(token)) {\n                    return reject(\n                        new PickUpError({\n                            code: ErrorCode.INVALID_BEARER_TOKEN,\n                            params: {},\n                        }),\n                    )\n                }\n\n                return resolve(token)\n            })\n        })\n    },\n    getJwtSecret: getSecret,\n    async decodeAndVerify<T>({\n        jwt,\n        key,\n        algorithm = ALGORITHM,\n        issuer = ISSUER,\n        audience,\n    }: VerifyParams): Promise<T> {\n        const verifyOptions: VerifyOptions = {\n            algorithms: [algorithm],\n            ...spreadIfDefined('issuer', issuer),\n            ...spreadIfDefined('audience', audience),\n        }\n\n        return new Promise((resolve, reject) => {\n            jwtLibrary.verify(jwt, key, verifyOptions, async (err, payload) => {\n                if (err) {\n                    return reject(err)\n                }\n                return resolve(payload as T)\n            })\n        })\n    },\n\n    decode<T>({ jwt }: DecodeParams): DecodedJwt<T> {\n        const decodeOptions: DecodeOptions = {\n            complete: true,\n        }\n\n        return jwtLibrary.decode(jwt, decodeOptions) as DecodedJwt<T>\n    },\n}\n\ntype SignParams = {\n    payload: Record<string, unknown>\n    key: string\n    expiresInSeconds?: number\n    algorithm?: JwtSignAlgorithm\n    keyId?: string\n}\n\ntype VerifyParams = {\n    jwt: string\n    key: string\n    algorithm?: JwtSignAlgorithm\n    issuer?: string | string[] | null\n    audience?: string\n}\n\ntype DecodeParams = {\n    jwt: string\n}\n\ntype DecodedJwt<T> = {\n    header: {\n        alg: string\n        typ: string\n        kid: string\n    }\n    payload: T\n    signature: string\n}\n","module.exports = require(\"jsonwebtoken\");","import { FastifyRequest } from 'fastify'\nimport { AccessTokenAuthnHandler } from './authn/access-token-authn-handler'\nimport { AnonymousAuthnHandler } from './authn/anonymous-authn-handler'\nimport { PrincipalTypeAuthzHandler } from './authz/principal-type-authz-handler'\nimport { ProjectAuthzHandler } from './authz/project-authz-handler'\nimport { Principal } from '@pickup/shared'\n\nconst AUTHN_HANDLERS = [\n    new AccessTokenAuthnHandler(),\n    new AnonymousAuthnHandler(),\n]\n\nconst AUTHZ_HANDLERS = [\n    new PrincipalTypeAuthzHandler(),\n    new ProjectAuthzHandler(),\n]\n\nexport const securityHandlerChain = async (\n    request: FastifyRequest,\n): Promise<void> => {\n    await executeAuthnHandlers(request)\n    await executeAuthzHandlers(request)\n}\n\n/**\n * Executes authn handlers in order, if one of the handlers populates the principal,\n * the remaining handlers are skipped.\n */\nconst executeAuthnHandlers = async (request: FastifyRequest): Promise<void> => {\n    for (const handler of AUTHN_HANDLERS) {\n        await handler.handle(request)\n        const principalPopulated = checkWhetherPrincipalIsPopulated(request)\n        if (principalPopulated) {\n            return\n        }\n    }\n}\n\nconst executeAuthzHandlers = async (request: FastifyRequest): Promise<void> => {\n    for (const handler of AUTHZ_HANDLERS) {\n        await handler.handle(request)\n    }\n}\n\nconst checkWhetherPrincipalIsPopulated = (request: FastifyRequest): boolean => {\n    const principal = request.principal as Principal | undefined\n    return principal !== undefined\n}\n","import { ErrorCode, isNil, PickUpError } from '@pickup/shared'\nimport { FastifyRequest } from 'fastify'\nimport { BaseSecurityHandler } from '../security-handler'\nimport { accessTokenManager } from '../../../authentication/lib/access-token-manager'\n\nexport class AccessTokenAuthnHandler extends BaseSecurityHandler {\n    private static readonly HEADER_NAME = 'authorization'\n    private static readonly HEADER_PREFIX = 'Bearer '\n\n    protected canHandle(request: FastifyRequest): Promise<boolean> {\n        const header = request.headers[AccessTokenAuthnHandler.HEADER_NAME]\n        const prefix = AccessTokenAuthnHandler.HEADER_PREFIX\n        const routeMatches = header?.startsWith(prefix) ?? false\n        const skipAuth = request.routeConfig.skipAuth\n        return Promise.resolve(routeMatches && !skipAuth)\n    }\n\n    protected async doHandle(request: FastifyRequest): Promise<void> {\n        const accessToken = this.extractAccessTokenOrThrow(request)\n        const principal = await accessTokenManager.verifyPrincipal(accessToken)\n        request.principal = principal\n    }\n\n    private extractAccessTokenOrThrow(request: FastifyRequest): string {\n        const header = request.headers[AccessTokenAuthnHandler.HEADER_NAME]\n        const prefix = AccessTokenAuthnHandler.HEADER_PREFIX\n        const accessToken = header?.substring(prefix.length)\n\n        if (isNil(accessToken)) {\n            throw new PickUpError({\n                code: ErrorCode.AUTHENTICATION,\n                params: {\n                    message: 'missing access token',\n                },\n            })\n        }\n\n        return accessToken\n    }\n}\n","import { FastifyRequest } from 'fastify'\n\nexport type SecurityHandler = {\n    handle(request: FastifyRequest): Promise<void>\n}\n\nexport abstract class BaseSecurityHandler implements SecurityHandler {\n    async handle(request: FastifyRequest): Promise<void> {\n        if (await this.canHandle(request)) {\n            await this.doHandle(request)\n        }\n    }\n\n    protected abstract canHandle(request: FastifyRequest): Promise<boolean>\n    protected abstract doHandle(request: FastifyRequest): Promise<void>\n}\n","import {\n    puId,\n    isNil,\n    Principal,\n    PrincipalType,\n} from '@pickup/shared'\nimport { FastifyRequest } from 'fastify'\nimport { BaseSecurityHandler } from '../security-handler'\n\nexport class AnonymousAuthnHandler extends BaseSecurityHandler {\n    protected canHandle(_request: FastifyRequest): Promise<boolean> {\n        return Promise.resolve(true)\n    }\n\n    protected doHandle(request: FastifyRequest): Promise<void> {\n        const principal = request.principal as Principal | undefined\n\n        if (isNil(principal)) {\n            request.principal = {\n                id: `ANONYMOUS_${puId()}`,\n                type: PrincipalType.UNKNOWN,\n                classroomId: `ANONYMOUS_${puId()}`,\n                platform: {\n                    id: `ANONYMOUS_${puId()}`,\n                },\n            }\n        }\n\n        return Promise.resolve()\n    }\n}\n","import {\n    ErrorCode,\n    PrincipalType,\n    PickUpError,\n} from '@pickup/shared'\nimport { FastifyRequest } from 'fastify'\nimport { BaseSecurityHandler } from '../security-handler'\n\nexport class PrincipalTypeAuthzHandler extends BaseSecurityHandler {\n    private static readonly IGNORED_ROUTES = [\n        '/favicon.ico',\n        '/v1/docs',\n        '/redirect',\n    ]\n\n    private static readonly DEFAULT_ALLOWED_PRINCIPAL_TYPES = [\n        PrincipalType.USER,\n        PrincipalType.SERVICE,\n    ]\n\n    protected canHandle(request: FastifyRequest): Promise<boolean> {\n        const requestMatches =\n      !PrincipalTypeAuthzHandler.IGNORED_ROUTES.includes(request.routerPath) &&\n      !request.routerPath.startsWith('/ui')\n\n        return Promise.resolve(requestMatches)\n    }\n\n    protected doHandle(request: FastifyRequest): Promise<void> {\n        const principalType = request.principal.type\n        const configuredPrincipals = request.routeConfig.allowedPrincipals\n        const defaultPrincipals =\n      PrincipalTypeAuthzHandler.DEFAULT_ALLOWED_PRINCIPAL_TYPES\n        const allowedPrincipals = configuredPrincipals ?? defaultPrincipals\n        const principalTypeNotAllowed = !allowedPrincipals.includes(principalType)\n\n        if (principalTypeNotAllowed) {\n            throw new PickUpError({\n                code: ErrorCode.AUTHORIZATION,\n                params: {\n                    message: 'invalid route for principal type',\n                },\n            })\n        }\n\n        return Promise.resolve()\n    }\n}\n","import { ErrorCode, PickUpError, PrincipalType } from '@pickup/shared'\nimport { FastifyRequest } from 'fastify'\nimport { requestUtils } from '../../request/request-utils'\nimport { BaseSecurityHandler } from '../security-handler'\n\nexport class ProjectAuthzHandler extends BaseSecurityHandler {\n    private static readonly IGNORED_ROUTES = [\n        '/v1/users/classrooms/:classroomId/token',\n        // This works for both platform and project, we have to check this manually\n        '/v1/user-invitations',\n    ]\n\n    protected canHandle(request: FastifyRequest): Promise<boolean> {\n        const requestMatches = !ProjectAuthzHandler.IGNORED_ROUTES.includes(\n            request.routerPath,\n        )\n        return Promise.resolve(requestMatches)\n    }\n\n    protected doHandle(request: FastifyRequest): Promise<void> {\n        const classroomId = requestUtils.extractClassroomId(request)\n\n        if (classroomId && classroomId !== request.principal.classroomId) {\n            throw new PickUpError({\n                code: ErrorCode.AUTHORIZATION,\n                params: {\n                    message: 'invalid classroom id',\n                },\n            })\n        }\n\n        return Promise.resolve()\n    }\n}\n","import { isObject } from '@pickup/shared'\nimport { FastifyRequest } from 'fastify'\n\nexport const requestUtils = {\n    extractClassroomId(request: FastifyRequest): string | undefined {\n        if (isObject(request.body) && 'classroomId' in request.body) {\n            return request.body.classroomId as string\n        }\n        else if (isObject(request.query) && 'classroomId' in request.query) {\n            return request.query.classroomId as string\n        }\n\n        return undefined\n    },\n}\n","import { Socket } from 'socket.io'\nimport { accessTokenManager } from '../authentication/lib/access-token-manager'\n\nexport type WebsocketListener<T> = (socket: Socket) => (data: T) => Promise<void>\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst listener: Record<string, WebsocketListener<any>> = {}\n\nexport const websocketService = {\n    async init(socket: Socket): Promise<void> {\n        const principal = await accessTokenManager.verifyPrincipal(socket.handshake.auth.token)\n        await socket.join(principal.classroomId)\n        for (const [event, handler] of Object.entries(listener)) {\n            socket.on(event, handler(socket))\n        }\n    },\n}\n","import { FastifyPluginAsyncTypebox } from '@fastify/type-provider-typebox'\nimport { openapiController } from './openapi.controller'\n\nexport const openapiModule: FastifyPluginAsyncTypebox = async (app) => {\n    await app.register(openapiController, { prefix: '/v1/docs' })\n}\n","import { FastifyInstance } from 'fastify'\n\nexport const openapiController = async (fastify: FastifyInstance) => {\n    fastify.get('/', async () => {\n        return JSON.stringify(fastify.swagger(), null, 2)\n    })\n}\n","import { AppSystemProp, ContainerType, DatabaseType, logger, SharedSystemProp, system, SystemProp } from '@pickup/server-shared'\nimport { PuEdition, PuEnvironment, isNil } from '@pickup/shared'\nimport { jwtUtils } from './jwt-utils'\n\n\nfunction enumValidator<T extends string>(enumValues: T[]) {\n    return (value: string) => {\n        const isValid = enumValues.includes(value as T)\n        return isValid ? true : `Value must be one of: ${enumValues.join(', ')}`\n    }\n}\n\nfunction booleanValidator(value: string | undefined) {\n    const isValid = value === 'true' || value === 'false'\n    return isValid ? true : 'Value must be either \"true\" or \"false\"'\n}\n\nfunction numberValidator(value: string | undefined) {\n    const isValid = !isNil(value) && !Number.isNaN(Number(value))\n    return isValid ? true : 'Value must be a valid number'\n}\n\nfunction stringValidator(value: string) {\n    const isValid = typeof value === 'string' && value.length > 0\n    return isValid ? true : 'Value must be a non-empty string'\n}\n\nfunction urlValidator(value: string) {\n    try {\n        new URL(value)\n        return true\n    }\n    catch {\n        return 'Value must be a valid URL'\n    }\n}\n\nconst systemPropValidators: {\n    [key in SystemProp]: (value: string) => true | string\n} = {\n    // SharedSystemProp\n    [SharedSystemProp.LOG_LEVEL]: enumValidator(['error', 'warn', 'info', 'debug', 'trace']),\n    [SharedSystemProp.LOG_PRETTY]: booleanValidator,\n    [SharedSystemProp.ENVIRONMENT]: enumValidator(Object.values(PuEnvironment)),\n    [SharedSystemProp.FRONTEND_URL]: urlValidator,\n    [SharedSystemProp.SENTRY_DSN]: urlValidator,\n    [SharedSystemProp.LOKI_PASSWORD]: stringValidator,\n    [SharedSystemProp.LOKI_URL]: urlValidator,\n    [SharedSystemProp.LOKI_USERNAME]: stringValidator,\n    [SharedSystemProp.EMAIL_AUTH_ENABLED]: booleanValidator,\n    [SharedSystemProp.CONTAINER_TYPE]: enumValidator(Object.values(ContainerType)),\n\n\n    // AppSystemProp\n    [AppSystemProp.DB_TYPE]: enumValidator(Object.values(DatabaseType)),\n    [AppSystemProp.ENCRYPTION_KEY]: stringValidator,\n    [AppSystemProp.JWT_SECRET]: stringValidator,\n    [AppSystemProp.LICENSE_KEY]: stringValidator,\n    [AppSystemProp.POSTGRES_DATABASE]: stringValidator,\n    [AppSystemProp.POSTGRES_HOST]: stringValidator,\n    [AppSystemProp.POSTGRES_PASSWORD]: stringValidator,\n    [AppSystemProp.POSTGRES_PORT]: numberValidator,\n    [AppSystemProp.POSTGRES_SSL_CA]: stringValidator,\n    [AppSystemProp.POSTGRES_URL]: stringValidator,\n    [AppSystemProp.POSTGRES_USERNAME]: stringValidator,\n    [AppSystemProp.POSTGRES_USE_SSL]: booleanValidator,\n    [AppSystemProp.EDITION]: enumValidator(Object.values(PuEdition)),\n    [AppSystemProp.FIREBASE_HASH_PARAMETERS]: stringValidator,\n    [AppSystemProp.API_RATE_LIMIT_AUTHN_MAX]: numberValidator,\n    [AppSystemProp.API_RATE_LIMIT_AUTHN_WINDOW]: stringValidator,\n    [AppSystemProp.API_RATE_LIMIT_AUTHN_ENABLED]: booleanValidator,\n    [AppSystemProp.MAX_FILE_SIZE_MB]: numberValidator,\n    [AppSystemProp.SMTP_SENDER_NAME]: stringValidator,\n    [AppSystemProp.SMTP_SENDER_EMAIL]: stringValidator,\n    [AppSystemProp.SMTP_HOST]: stringValidator,\n    [AppSystemProp.SMTP_PASSWORD]: stringValidator,\n    [AppSystemProp.SMTP_PORT]: numberValidator,\n    [AppSystemProp.SMTP_USERNAME]: stringValidator,\n    [AppSystemProp.SHOW_PLATFORM_DEMO]: booleanValidator,\n}\n\n\n\nconst validateSystemPropTypes = () => {\n    const systemProperties: SystemProp[] = [...Object.values(SharedSystemProp), ...Object.values(AppSystemProp)]\n    const errors: {\n        [key in SystemProp]?: string\n    } = {}\n\n    for (const prop of systemProperties) {\n        const value = system.get(prop)\n        const onlyValidateIfValueIsSet = !isNil(value)\n        if (onlyValidateIfValueIsSet) {\n            const validationResult = systemPropValidators[prop](value)\n            if (validationResult !== true) {\n                errors[prop] = `Current value: ${value}. Expected: ${validationResult}`\n            }\n        }\n    }\n    return errors\n}\n\nexport const validateEnvPropsOnStartup = async (): Promise<void> => {\n    const errors = validateSystemPropTypes()\n    if (Object.keys(errors).length > 0) {\n        logger.warn({\n            errors,\n        }, '[validateEnvPropsOnStartup]')\n    }\n\n    const jwtSecret = await jwtUtils.getJwtSecret()\n    if (isNil(jwtSecret)) {\n        throw new Error(JSON.stringify({\n            message: 'PU_JWT_SECRET is undefined, please define it in the environment variables',\n            docUrl: 'https://www.activepieces.com/docs/install/configuration/environment-variables',\n        }))\n    }\n}\n","import { AppSystemProp, DatabaseType, SharedSystemProp, system } from '@pickup/server-shared'\nimport { PuEdition, PuEnvironment, isNil } from '@pickup/shared'\nimport {\n    ArrayContains,\n    DataSource,\n    EntitySchema,\n    ObjectLiteral,\n    SelectQueryBuilder,\n} from 'typeorm'\nimport { OtpEntity } from '../otp/otp-entity'\nimport { createPostgresDataSource } from './postgres-connection'\n\nfunction getEntities(): EntitySchema<unknown>[] {\n    const edition = system.getEdition()\n\n    const entities: EntitySchema[] = [\n\n    ]\n\n    switch (edition) {\n        case PuEdition.ENTERPRISE:\n            entities.push(\n                OtpEntity,\n            )\n            break\n        case PuEdition.COMMUNITY:\n            break\n        default:\n            throw new Error(`Unsupported edition: ${edition}`)\n    }\n\n    return entities\n}\n\nconst getSynchronize = (): boolean => {\n    const env = system.getOrThrow<PuEnvironment>(SharedSystemProp.ENVIRONMENT)\n\n    return env !== PuEnvironment.DEVELOPMENT\n}\n\nexport const commonProperties = {\n    subscribers: [],\n    entities: getEntities(),\n    synchronize: getSynchronize(),\n}\n\nlet _databaseConnection: DataSource | null = null\n\nexport const databaseConnection = () => {\n    if (isNil(_databaseConnection)) {\n        _databaseConnection = createPostgresDataSource()\n    }\n    return _databaseConnection\n}\n\nexport function APArrayContains<T extends ObjectLiteral>(\n    columnName: string,\n    values: string[],\n    query: SelectQueryBuilder<T>,\n): SelectQueryBuilder<T> {\n    const databaseType = system.get(AppSystemProp.DB_TYPE)\n    switch (databaseType) {\n        case DatabaseType.POSTGRES:\n            return query.andWhere({\n                [columnName]: ArrayContains(values),\n            })\n        case DatabaseType.SQLITE3: {\n            const likeConditions = values\n                .map((tag, index) => `flow_run.tags LIKE :tag${index}`)\n                .join(' AND ')\n            const likeParams = values.reduce((params, tag, index) => {\n                return {\n                    ...params,\n                    [`tag${index}`]: `%${tag}%`,\n                }\n            }, {})\n            return query.andWhere(likeConditions, likeParams)\n        }\n        default:\n            throw new Error(`Unsupported database type: ${databaseType}`)\n    }\n}\n\n// Uncomment the below line when running `nx db-migration server-api name=<MIGRATION_NAME>` and recomment it after the migration is generated\n// export const exportedConnection = databaseConnection()","module.exports = require(\"typeorm\");","import { OtpModel, OtpState, OtpType, User } from '@pickup/shared'\nimport { EntitySchema } from 'typeorm'\nimport {\n    PuIdSchema,\n    BaseColumnSchemaPart,\n} from '../database/database-common'\n\nexport type OtpSchema = OtpModel & {\n    user: User\n}\n\nexport const OtpEntity = new EntitySchema<OtpSchema>({\n    name: 'otp',\n    columns: {\n        ...BaseColumnSchemaPart,\n        type: {\n            type: String,\n            enum: OtpType,\n            nullable: false,\n        },\n        userId: {\n            ...PuIdSchema,\n            nullable: false,\n        },\n        value: {\n            type: String,\n            nullable: false,\n        },\n        state: {\n            type: String,\n            enum: OtpState,\n            nullable: false,\n        },\n    },\n    // indices: [\n    //     {\n    //         name: 'idx_otp_user_id_type',\n    //         columns: ['userId', 'type'],\n    //         unique: true,\n    //     },\n    // ],\n    // relations: {\n    //     user: {\n    //         type: 'many-to-one',\n    //         target: 'user',\n    //         cascade: true,\n    //         onDelete: 'CASCADE',\n    //         joinColumn: {\n    //             name: 'userId',\n    //             foreignKeyConstraintName: 'fk_otp_user_id',\n    //         },\n    //     },\n    // },\n})\n","import { AppSystemProp, DatabaseType, system } from '@pickup/server-shared'\nimport { PuEdition } from '@pickup/shared'\nimport { EntitySchemaColumnOptions } from 'typeorm'\n\nconst databaseType = system.get(AppSystemProp.DB_TYPE)\n\nexport const JSON_COLUMN_TYPE =\n  databaseType === DatabaseType.SQLITE3 ? 'simple-json' : 'json'\nexport const JSONB_COLUMN_TYPE =\n  databaseType === DatabaseType.SQLITE3 ? 'simple-json' : 'jsonb'\nexport const BLOB_COLUMN_TYPE =\n  databaseType === DatabaseType.SQLITE3 ? 'blob' : 'bytea'\nexport const ARRAY_COLUMN_TYPE =\n  databaseType === DatabaseType.SQLITE3 ? 'simple-array' : String\nexport const TIMESTAMP_COLUMN_TYPE =\n  databaseType === DatabaseType.SQLITE3\n      ? 'datetime'\n      : 'timestamp with time zone'\nexport const COLLATION =\n  databaseType === DatabaseType.SQLITE3 ? undefined : 'en_natural'\n\nexport function isPostgres(): boolean {\n    return databaseType === DatabaseType.POSTGRES\n}\n\nexport const PuIdSchema = {\n    type: String,\n    length: 21,\n} as EntitySchemaColumnOptions\n\nexport const BaseColumnSchemaPart = {\n    id: {\n        ...PuIdSchema,\n        primary: true,\n    } as EntitySchemaColumnOptions,\n    created: {\n        name: 'created',\n        type: TIMESTAMP_COLUMN_TYPE,\n        createDate: true,\n    } as EntitySchemaColumnOptions,\n    updated: {\n        name: 'updated',\n        type: TIMESTAMP_COLUMN_TYPE,\n        updateDate: true,\n    } as EntitySchemaColumnOptions,\n}\n\nexport function isNotOneOfTheseEditions(editions: PuEdition[]): boolean {\n    return !editions.includes(system.getEdition())\n}\n","import { TlsOptions } from 'node:tls'\nimport { AppSystemProp, SharedSystemProp, system } from '@pickup/server-shared'\nimport { isNil, PuEdition, PuEnvironment } from '@pickup/shared'\nimport { DataSource, MigrationInterface } from 'typeorm'\nimport { commonProperties } from './database-connection'\n\nconst getSslConfig = (): boolean | TlsOptions => {\n    const useSsl = system.get(AppSystemProp.POSTGRES_USE_SSL)\n\n    if (useSsl === 'true') {\n        return {\n            ca: system.get(AppSystemProp.POSTGRES_SSL_CA)?.replace(/\\\\n/g, '\\n'),\n        }\n    }\n\n    return false\n}\n\nconst getMigrations = (): (new () => MigrationInterface)[] => {\n    const commonMigration = []\n\n    const edition = system.getEdition()\n    switch (edition) {\n        case PuEdition.ENTERPRISE:\n            // Push enterprise migrations here\n\n            break\n        case PuEdition.COMMUNITY:\n            // Push community migrations here\n            break\n    }\n\n    return []\n}\n\nconst getMigrationConfig = (): MigrationConfig => {\n    const env = system.getOrThrow<PuEnvironment>(SharedSystemProp.ENVIRONMENT)\n\n    if (env === PuEnvironment.TESTING) {\n        return {}\n    }\n\n    return {\n        migrationsRun: true,\n        migrationsTransactionMode: 'each',\n        migrations: getMigrations(),\n    }\n}\n\nexport const createPostgresDataSource = (): DataSource => {\n    const migrationConfig = getMigrationConfig()\n    const url = system.get(AppSystemProp.POSTGRES_URL)\n\n    if (!isNil(url)) {\n        return new DataSource({\n            type: 'postgres',\n            url,\n            ssl: getSslConfig(),\n            ...migrationConfig,\n            ...commonProperties,\n        })\n    }\n\n    const database = system.getOrThrow(AppSystemProp.POSTGRES_DATABASE)\n    const host = system.getOrThrow(AppSystemProp.POSTGRES_HOST)\n    const password = system.getOrThrow(AppSystemProp.POSTGRES_PASSWORD)\n    const serializedPort = system.getOrThrow(AppSystemProp.POSTGRES_PORT)\n    const port = Number.parseInt(serializedPort, 10)\n    const username = system.getOrThrow(AppSystemProp.POSTGRES_USERNAME)\n\n    return new DataSource({\n        type: 'postgres',\n        host,\n        port,\n        username,\n        password,\n        database,\n        ssl: getSslConfig(),\n        ...migrationConfig,\n        ...commonProperties,\n    })\n}\n\ntype MigrationConfig = {\n    migrationsRun?: boolean\n    migrationsTransactionMode?: 'all' | 'none' | 'each'\n    migrations?: (new () => MigrationInterface)[]\n}\n","import { logger, SharedSystemProp, system } from '@pickup/server-shared'\nimport { PuEnvironment } from '@pickup/shared'\n\nconst currentEnvIsNotDev = (): boolean => {\n    const env = system.get(SharedSystemProp.ENVIRONMENT)\n    return env !== PuEnvironment.DEVELOPMENT\n}\n\nconst seedDevUser = async (): Promise<void> => {\n    const DEV_EMAIL = 'dev@ap.com'\n    const DEV_PASSWORD = '12345678'\n\n    //TODO INSERT DEV USER\n    // await authenticationService.signUp({\n    //     email: DEV_EMAIL,\n    //     password: DEV_PASSWORD,\n    //     firstName: 'Dev',\n    //     lastName: 'User',\n    //     verified: true,\n    //     platformId: null,\n    // })\n\n    logger.info({ name: 'seedDevUser' }, `email=${DEV_EMAIL} pass=${DEV_PASSWORD}`)\n}\n\nexport const seedDevData = async (): Promise<void> => {\n    if (currentEnvIsNotDev()) {\n        logger.info({ name: 'seedDevData' }, 'skip: not in development environment')\n        return\n    }\n\n    await seedDevUser()\n}\n","import cors from '@fastify/cors'\nimport formBody from '@fastify/formbody'\nimport fastifyMultipart, { MultipartFile } from '@fastify/multipart'\nimport fastify, { FastifyBaseLogger, FastifyInstance } from 'fastify'\nimport fastifyFavicon from 'fastify-favicon'\nimport { fastifyRawBody } from 'fastify-raw-body'\nimport qs from 'qs'\nimport { setupApp } from './app'\nimport { errorHandler } from './helper/error-handler'\nimport { AppSystemProp, logger, system } from '@pickup/server-shared'\nimport { puId, PuMultipartFile } from '@pickup/shared'\n\nconst MAX_FILE_SIZE_MB = system.getNumberOrThrow(AppSystemProp.MAX_FILE_SIZE_MB)\n\nexport const setupServer = async (): Promise<FastifyInstance> => {\n    const app = await setupBaseApp()\n\n    if (system.isApp()) {\n        await setupApp(app)\n    }\n    return app\n}\n\nasync function setupBaseApp(): Promise<FastifyInstance> {\n    const app = fastify({\n        logger: logger as FastifyBaseLogger,\n        ignoreTrailingSlash: true,\n        pluginTimeout: 30000,\n        // Default 100MB, also set in nginx.conf\n        bodyLimit: (MAX_FILE_SIZE_MB + 4) * 1024 * 1024,\n        genReqId: () => {\n            return `req_${puId()}`\n        },\n        ajv: {\n            customOptions: {\n                removeAdditional: 'all',\n                useDefaults: true,\n                coerceTypes: 'array',\n                formats: {},\n            },\n        },\n    })\n\n\n    await app.register(fastifyFavicon)\n    await app.register(fastifyMultipart, {\n        attachFieldsToBody: 'keyValues',\n        async onFile(part: MultipartFile) {\n            const puFile: PuMultipartFile = {\n                filename: part.filename,\n                data: await part.toBuffer(),\n                type: 'file',\n            };\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (part as any).value = puFile\n        },\n    })\n\n    await app.register(fastifyRawBody, {\n        field: 'rawBody',\n        global: false,\n        encoding: 'utf8',\n        runFirst: true,\n        routes: [],\n    })\n\n    await app.register(formBody, { parser: (str) => qs.parse(str) })\n    app.setErrorHandler(errorHandler)\n    await app.register(cors, {\n        origin: '*',\n        exposedHeaders: ['*'],\n        methods: ['*'],\n    })\n    // SurveyMonkey\n    app.addContentTypeParser(\n        'application/vnd.surveymonkey.response.v1+json',\n        { parseAs: 'string' },\n        app.getDefaultJsonParser('ignore', 'ignore'),\n    )\n\n    return app\n}\n\n","module.exports = require(\"@fastify/cors\");","module.exports = require(\"@fastify/formbody\");","module.exports = require(\"@fastify/multipart\");","module.exports = require(\"fastify\");","module.exports = require(\"fastify-favicon\");","module.exports = require(\"fastify-raw-body\");","module.exports = require(\"qs\");","import { exceptionHandler } from '@pickup/server-shared'\nimport { PickUpError, ErrorCode } from '@pickup/shared'\nimport { FastifyError, FastifyReply, FastifyRequest } from 'fastify'\nimport { StatusCodes } from 'http-status-codes'\n\n\nexport const errorHandler = async (\n    error: FastifyError,\n    request: FastifyRequest,\n    reply: FastifyReply,\n): Promise<void> => {\n    if (error instanceof PickUpError) {\n        const statusCodeMap: Partial<Record<ErrorCode, StatusCodes>> = {\n            [ErrorCode.INVALID_BEARER_TOKEN]: StatusCodes.UNAUTHORIZED,\n            [ErrorCode.FEATURE_DISABLED]: StatusCodes.PAYMENT_REQUIRED,\n            [ErrorCode.PERMISSION_DENIED]: StatusCodes.FORBIDDEN,\n            [ErrorCode.ENTITY_NOT_FOUND]: StatusCodes.NOT_FOUND,\n            [ErrorCode.EXISTING_USER]: StatusCodes.CONFLICT,\n            [ErrorCode.EXISTING_ALERT_CHANNEL]: StatusCodes.CONFLICT,\n            [ErrorCode.AUTHORIZATION]: StatusCodes.FORBIDDEN,\n            [ErrorCode.INVALID_CREDENTIALS]: StatusCodes.UNAUTHORIZED,\n            [ErrorCode.SESSION_EXPIRED]: StatusCodes.FORBIDDEN,\n            [ErrorCode.EMAIL_IS_NOT_VERIFIED]: StatusCodes.FORBIDDEN,\n            [ErrorCode.USER_IS_INACTIVE]: StatusCodes.FORBIDDEN,\n            [ErrorCode.EMAIL_AUTH_DISABLED]: StatusCodes.FORBIDDEN,\n            [ErrorCode.INVALID_OTP]: StatusCodes.GONE,\n            [ErrorCode.VALIDATION]: StatusCodes.CONFLICT,\n            [ErrorCode.AUTHENTICATION]: StatusCodes.UNAUTHORIZED,\n            [ErrorCode.INVALID_LICENSE_KEY]: StatusCodes.BAD_REQUEST,\n            [ErrorCode.EMAIL_ALREADY_HAS_ACTIVATION_KEY]: StatusCodes.CONFLICT,\n        }\n        const statusCode =\n      statusCodeMap[error.error.code] ?? StatusCodes.BAD_REQUEST\n\n        await reply.status(statusCode).send({\n            code: error.error.code,\n            params: error.error.params,\n        })\n    }\n    else {\n        request.log.error('[errorHandler]: ' + JSON.stringify(error))\n        if (\n            !error.statusCode ||\n      error.statusCode === StatusCodes.INTERNAL_SERVER_ERROR.valueOf()\n        ) {\n            exceptionHandler.handle(error)\n        }\n        await reply\n            .status(error.statusCode ?? StatusCodes.INTERNAL_SERVER_ERROR)\n            .send(error)\n    }\n}\n","module.exports = require(\"http-status-codes\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { logger, system } from '@pickup/server-shared'\nimport { FastifyInstance } from 'fastify'\nimport { appPostBoot } from './app/app'\nimport { databaseConnection } from './app/database/database-connection'\nimport { seedDevData } from './app/database/seeds/dev-seeds'\nimport { setupServer } from './app/server'\n\nconst start = async (app: FastifyInstance): Promise<void> => {\n    console.log('Starting server')\n    try {\n        await app.listen({\n            host: '0.0.0.0',\n            port: 3000,\n        })\n        if (system.isApp()) {\n            await appPostBoot()\n        }\n    }\n    catch (err) {\n        logger.error(err)\n        process.exit(1)\n    }\n}\n\n// This might be needed as it can be called twice\nlet shuttingDown = false\n\n\nconst stop = async (app: FastifyInstance): Promise<void> => {\n    if (shuttingDown) return\n    shuttingDown = true\n\n    try {\n        await app.close()\n        process.exit(0)\n    }\n    catch (err) {\n        logger.error('Error stopping server')\n        logger.error(err)\n        process.exit(1)\n    }\n}\n\nfunction setupTimeZone(): void {\n    // It's important to set the time zone to UTC when working with dates in PostgreSQL.\n    // If the time zone is not set to UTC, there can be problems when storing dates in UTC but not considering the UTC offset when converting them back to local time. This can lead to incorrect fields being displayed for the created\n    // https://stackoverflow.com/questions/68240368/typeorm-find-methods-returns-wrong-timestamp-time\n    process.env.TZ = 'UTC'\n}\n\n\nconst main = async (): Promise<void> => {\n    setupTimeZone()\n    if (system.isApp()) {\n        await databaseConnection().initialize()\n        await databaseConnection().runMigrations()\n        await seedDevData()\n    }\n    const app = await setupServer()\n\n    process.on('SIGINT', () => {\n        stop(app).catch((e) => logger.error(e, '[Main#stop]'))\n    })\n\n    process.on('SIGTERM', () => {\n        stop(app).catch((e) => logger.error(e, '[Main#stop]'))\n    })\n\n    await start(app)\n}\n\nmain().catch((e) => {\n    logger.error(e, '[Main#main]')\n    process.exit(1)\n})\n\n"],"names":[],"sourceRoot":""}